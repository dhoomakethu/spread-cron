Running tests on a test flinger device
Loading environment variables
Using environment file: tf_snapd_cm3_refresh
Deleting test flinger data
Creating job for snapd using a device
Running testflinger client
Submitting job to testflinger
JOB_ID: 538c4ca8-8fb7-4606-ab16-b2351abcf2db
Print job: /var/snap/testflinger-cli/current/job.yaml 
job_queue: cm3
global_timeout: 36000
provision_data:
    url: http://cdimage.ubuntu.com/ubuntu-core/16/stable/current/ubuntu-core-16-cm3.img.xz
test_data:
    test_cmds: |
        #!/bin/bash
        sudo apt update || ps aux | grep apt
        sudo apt install -y git curl sshpass
        git clone https://github.com/sergiocazzolato/snappy-qa-jobs.git
        (cd snappy-qa-jobs && git checkout master)
        git clone https://git.launchpad.net/snapd-vendor snapd
        (cd snapd && git checkout master)
        . snapd/tests/lib/external/prepare-ssh.sh "{device_ip}" "22" "ubuntu"
        . snappy-qa-jobs/scripts/utils/register_device.sh "{device_ip}" "22" "test" "ubuntu" "sergiocazzolato@yahoo.com.ar"
        . snappy-qa-jobs/scripts/utils/refresh.sh "{device_ip}" "22" "test" "ubuntu" "stable" "edge"
        . snappy-qa-jobs/scripts/utils/run_setup.sh "{device_ip}" "22" "test" "ubuntu" ""
        . snappy-qa-jobs/scripts/utils/get_spread.sh
        . snappy-qa-jobs/scripts/utils/run_spread.sh "{device_ip}" "22" "snapd" "external:ubuntu-core-16-arm-32:tests/" "" "tests/main/auto-refresh,tests/main/interfaces-content" "-v"
Showing job data
This job is currently waiting on a node to become available. You will see no further output until the job starts running.
***********************************

* Starting setup phase on cm3-001 *

***********************************

Cleaning up container if it exists...
Error response from daemon: No such container: cm3001

***************************************

* Starting provision phase on cm3-001 *

***************************************
Install python-logstash if you want to use logstash logging
2018-06-03 04:41:18,174 cm3-001 INFO: BEGIN provision
2018-06-03 04:41:18,174 cm3-001 INFO: Provisioning device
2018-06-03 04:41:24,488 cm3-001 INFO: Running snmpset -c private -v1 10.101.48.8 .1.3.6.1.4.1.318.1.1.12.3.3.1.1.4.1 i 2
iso.3.6.1.4.1.318.1.1.12.3.3.1.1.4.1 = INTEGER: 2
2018-06-03 04:41:24,608 cm3-001 INFO: Running sleep 10
2018-06-03 04:41:34,621 cm3-001 INFO: Running snmpset -c private -v1 10.101.48.8 .1.3.6.1.4.1.318.1.1.12.3.3.1.1.4.1 i 1
iso.3.6.1.4.1.318.1.1.12.3.3.1.1.4.1 = INTEGER: 1
2018-06-03 04:41:34,740 cm3-001 INFO: Flashing image
2018-06-03 04:45:26,990 cm3-001 INFO: b"Warning: Permanently added '10.101.50.180' (ECDSA) to the list of known hosts.\r\ntesting...\n+ echo testing...\n+ /snap/cm3-installer/6/bin/rpiboot -d /snap/cm3-installer/6/msd\nWaiting for BCM2835/6/7\nSending bootcode.bin\nSuccessful read 4 bytes \nWaiting for BCM2835/6/7\nSecond stage boot server\nFile read: start.elf\nSecond stage boot server done\nstarting image download...\n+ echo 'starting image download...'\n+ curl -L http://cdimage.ubuntu.com/ubuntu-core/16/stable/current/ubuntu-core-16-cm3.img.xz\n+ dd of=/dev/sda bs=4M oflag=sync\n+ unxz -c\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r  0  334M    0 30617    0     0  23146      0  4:12:24  0:00:01  4:12:23 23159\r  0  334M    0  333k    0     0   155k      0  0:36:38  0:00:02  0:36:36  155k\r  0  334M    0 1225k    0     0   389k      0  0:14:39  0:00:03  0:14:36  389k\r  0  334M    0 3112k    0     0   751k      0  0:07:35  0:00:04  0:07:31  751k\r  1  334M    1 4639k    0     0   899k      0  0:06:20  0:00:05  0:06:15  946k\r  1  334M    1 6054k    0     0   974k      0  0:05:51  0:00:06  0:05:45 1232k\r  2  334M    2 7611k    0     0  1060k      0  0:05:22  0:00:07  0:05:15 1445k\r  2  334M    2 8923k    0     0  1096k      0  0:05:12  0:00:08  0:05:04 1541k\r  2  334M    2 10.0M    0     0  1121k      0  0:05:05  0:00:09  0:04:56 1428k\r  3  334M    3 11.3M    0     0  1149k      0  0:04:57  0:00:10  0:04:47 1407k\r  3  334M    3 12.5M    0     0  1156k      0  0:04:55  0:00:11  0:04:44 1385k\r  4  334M    4 14.1M    0     0  1189k      0  0:04:47  0:00:12  0:04:35 1374k\r  4  334M    4 15.4M    0     0  1055k      0  0:05:24  0:00:15  0:05:09 1007k\r  4  334M    4 15.5M    0     0   532k      0  0:10:42  0:00:29  0:10:13  271k\r  4  334M    4 15.5M    0     0   414k      0  0:13:45  0:00:38  0:13:07  150k\r  5  334M    5 18.6M    0     0   487k      0  0:11:42  0:00:39  0:11:03  220k\r  5  334M    5 19.3M    0     0   490k      0  0:11:38  0:00:40  0:10:58  190k\r  6  334M    6 20.7M    0     0   514k      0  0:11:05  0:00:41  0:10:24  204k\r  6  334M    6 22.0M    0     0   536k      0  0:10:38  0:00:42  0:09:56  546k\r  7  334M    7 23.5M    0     0   559k      0  0:10:12  0:00:43  0:09:29 1707k\r  7  334M    7 24.9M    0     0   579k      0  0:09:50  0:00:44  0:09:06 1299k\r  7  334M    7 26.6M    0     0   604k      0  0:09:26  0:00:45  0:08:41 1581k\r  8  334M    8 28.1M    0     0   622k      0  0:09:10  0:00:46  0:08:24 1500k\r  8  334M    8 29.5M    0     0   642k      0  0:08:52  0:00:47  0:08:05 1532k\r  9  334M    9 30.8M    0     0   655k      0  0:08:41  0:00:48  0:07:53 1491k\r  9  334M    9 32.3M    0     0   673k      0  0:08:28  0:00:49  0:07:39 1502k\r 10  334M   10 33.5M    0     0   684k      0  0:08:20  0:00:50  0:07:30 1411k\r 10  334M   10 35.0M    0     0   702k      0  0:08:07  0:00:51  0:07:16 1471k\r 10  334M   10 36.3M    0     0   713k      0  0:08:00  0:00:52  0:07:08 1381k\r 11  334M   11 37.5M    0     0   722k      0  0:07:53  0:00:53  0:07:00 1365k\r 11  334M   11 38.9M    0     0   735k      0  0:07:45  0:00:54  0:06:51 1349k\r 12  334M   12 40.3M    0     0   748k      0  0:07:37  0:00:55  0:06:42 1393k\r 12  334M   12 41.7M    0     0   760k      0  0:07:29  0:00:56  0:06:33 1358k\r 12  334M   12 42.7M    0     0   765k      0  0:07:27  0:00:57  0:06:30 1301k\r 13  334M   13 43.9M    0     0   774k      0  0:07:22  0:00:58  0:06:24 1320k\r 13  334M   13 45.1M    0     0   781k      0  0:07:17  0:00:59  0:06:18 1284k\r 13  334M   13 46.5M    0     0   791k      0  0:07:12  0:01:00  0:06:12 1271k\r 14  334M   14 47.8M    0     0   801k      0  0:07:07  0:01:01  0:06:06 1257k\r 14  334M   14 49.1M    0     0   809k      0  0:07:02  0:01:02  0:06:00 1322k\r 15  334M   15 50.4M    0     0   818k      0  0:06:58  0:01:03  0:05:55 1336k\r 15  334M   15 51.5M    0     0   822k      0  0:06:56  0:01:04  0:05:52 1306k\r 15  334M   15 52.9M    0     0   832k      0  0:06:51  0:01:05  0:05:46 1319k\r 16  334M   16 54.1M    0     0   837k      0  0:06:48  0:01:06  0:05:42 1276k\r 16  334M   16 55.2M    0     0   843k      0  0:06:45  0:01:07  0:05:38 1262k\r 16  334M   16 56.6M    0     0   851k      0  0:06:42  0:01:08  0:05:34 1265k\r 17  334M   17 58.0M    0     0   860k      0  0:06:37  0:01:09  0:05:28 1341k\r 17  334M   17 59.4M    0     0   867k      0  0:06:34  0:01:10  0:05:24 1328k\r 18  334M   18 60.5M    0     0   870k      0  0:06:33  0:01:11  0:05:22 1307k\r 18  334M   18 62.0M    0     0   880k      0  0:06:28  0:01:12  0:05:16 1387k\r 19  334M   19 63.5M    0     0   889k      0  0:06:24  0:01:13  0:05:11 1403k\r 19  334M   19 64.8M    0     0   896k      0  0:06:21  0:01:14  0:05:07 1392k\r 19  334M   19 66.4M    0     0   905k      0  0:06:18  0:01:15  0:05:03 1433k\r 20  334M   20 67.2M    0     0   904k      0  0:06:18  0:01:16  0:05:02 1388k\r 20  334M   20 69.9M    0     0   928k      0  0:06:08  0:01:17  0:04:51 1618k\r 21  334M   21 72.2M    0     0   946k      0  0:06:01  0:01:18  0:04:43 1786k\r 22  334M   22 74.8M    0     0   968k      0  0:05:53  0:01:19  0:04:34 2045k\r 23  334M   23 78.0M    0     0   997k      0  0:05:43  0:01:20  0:04:23 2385k\r 24  334M   24 81.7M    0     0  1031k      0  0:05:31  0:01:21  0:04:10 2978k\r 25  334M   25 86.3M    0     0  1076k      0  0:05:17  0:01:22  0:03:55 3367k\r 27  334M   27 91.3M    0     0  1125k      0  0:05:04  0:01:23  0:03:41 3920k\r 28  334M   28 96.1M    0     0  1169k      0  0:04:52  0:01:24  0:03:28 4353k\r 29  334M   29 99.2M    0     0  1192k      0  0:04:47  0:01:25  0:03:22 4254k\r 30  334M   30  101M    0     0  1206k      0  0:04:43  0:01:26  0:03:17 4034k\r 31  334M   31  104M    0     0  1224k      0  0:04:39  0:01:27  0:03:12 3618k\r 31  334M   31  106M    0     0  1233k      0  0:04:37  0:01:28  0:03:09 3029k\r 32  334M   32  108M    0     0  1243k      0  0:04:35  0:01:29  0:03:06 2476k\r 33  334M   33  110M    0     0  1253k      0  0:04:33  0:01:30  0:03:03 2321k\r 33  334M   33  112M    0     0  1264k      0  0:04:30  0:01:31  0:02:59 2254k\r 34  334M   34  114M    0     0  1276k      0  0:04:28  0:01:32  0:02:56 2190k\r 34  334M   34  116M    0     0  1285k      0  0:04:26  0:01:33  0:02:53 2195k\r 35  334M   35  119M    0     0  1295k      0  0:04:24  0:01:34  0:02:50 2228k\r 36  334M   36  121M    0     0  1305k      0  0:04:22  0:01:35  0:02:47 2236k\r 36  334M   36  123M    0     0  1316k      0  0:04:20  0:01:36  0:02:44 2272k\r 37  334M   37  125M    0     0  1327k      0  0:04:17  0:01:37  0:02:40 2280k\r 38  334M   38  128M    0     0  1339k      0  0:04:15  0:01:38  0:02:37 2356k\r 39  334M   39  131M    0     0  1354k      0  0:04:12  0:01:39  0:02:33 2460k\r 40  334M   40  134M    0     0  1370k      0  0:04:09  0:01:40  0:02:29 2616k\r 41  334M   41  137M    0     0  1391k      0  0:04:06  0:01:41  0:02:25 2826k\r 41  334M   41  139M    0     0  1392k      0  0:04:05  0:01:42  0:02:23 2625k\r 42  334M   42  143M    0     0  1422k      0  0:04:00  0:01:43  0:02:17 3026k\r 43  334M   43  146M    0     0  1444k      0  0:03:57  0:01:44  0:02:13 3230k\r 45  334M   45  150M    0     0  1465k      0  0:03:53  0:01:45  0:02:08 3362k\r 46  334M   46  154M    0     0  1488k      0  0:03:50  0:01:46  0:02:04 3449k\r 47  334M   47  158M    0     0  1510k      0  0:03:46  0:01:47  0:01:59 3971k\r 48  334M   48  162M    0     0  1535k      0  0:03:42  0:01:48  0:01:54 3891k\r 49  334M   49  165M    0     0  1549k      0  0:03:40  0:01:49  0:01:51 3732k\r 50  334M   50  168M    0     0  1567k      0  0:03:38  0:01:50  0:01:48 3722k\r 51  334M   51  171M    0     0  1582k      0  0:03:36  0:01:51  0:01:45 3577k\r 52  334M   52  174M    0     0  1597k      0  0:03:34  0:01:52  0:01:42 3463k\r 53  334M   53  178M    0     0  1613k      0  0:03:32  0:01:53  0:01:39 3307k\r 54  334M   54  181M    0     0  1630k      0  0:03:29  0:01:54  0:01:35 3408k\r 55  334M   55  185M    0     0  1647k      0  0:03:27  0:01:55  0:01:32 3400k\r 56  334M   56  187M    0     0  1654k      0  0:03:26  0:01:56  0:01:30 3260k\r 57  334M   57  191M    0     0  1676k      0  0:03:24  0:01:57  0:01:27 3447k\r 58  334M   58  195M    0     0  1692k      0  0:03:22  0:01:58  0:01:24 3487k\r 59  334M   59  198M    0     0  1708k      0  0:03:20  0:01:59  0:01:21 3494k\r 60  334M   60  202M    0     0  1724k      0  0:03:18  0:02:00  0:01:18 3503k\r 61  334M   61  205M    0     0  1740k      0  0:03:16  0:02:01  0:01:15 3749k\r 62  334M   62  209M    0     0  1752k      0  0:03:15  0:02:02  0:01:13 3527k\r 63  334M   63  212M    0     0  1767k      0  0:03:13  0:02:03  0:01:10 3529k\r 64  334M   64  215M    0     0  1779k      0  0:03:12  0:02:04  0:01:08 3465k\r 65  334M   65  219M    0     0  1792k      0  0:03:10  0:02:05  0:01:05 3429k\r 66  334M   66  222M    0     0  1808k      0  0:03:09  0:02:06  0:01:03 3447k\r 67  334M   67  226M    0     0  1825k      0  0:03:07  0:02:07  0:01:00 3602k\r 68  334M   68  230M    0     0  1841k      0  0:03:05  0:02:08  0:00:57 3668k\r 70  334M   70  234M    0     0  1858k      0  0:03:04  0:02:09  0:00:55 3813k\r 71  334M   71  238M    0     0  1873k      0  0:03:02  0:02:10  0:00:52 3905k\r 72  334M   72  241M    0     0  1884k      0  0:03:01  0:02:11  0:00:50 3802k\r 73  334M   73  244M    0     0  1898k      0  0:03:00  0:02:12  0:00:48 3755k\r 74  334M   74  248M    0     0  1907k      0  0:02:59  0:02:13  0:00:46 3607k\r 75  334M   75  251M    0     0  1919k      0  0:02:58  0:02:14  0:00:44 3498k\r 76  334M   76  255M    0     0  1933k      0  0:02:57  0:02:15  0:00:42 3474k\r 77  334M   77  259M    0     0  1948k      0  0:02:55  0:02:16  0:00:39 3611k\r 78  334M   78  262M    0     0  1962k      0  0:02:54  0:02:17  0:00:37 3665k\r 78  334M   78  263M    0     0  1908k      0  0:02:59  0:02:21  0:00:38 1925k\r 79  334M   79  265M    0     0  1913k      0  0:02:58  0:02:22  0:00:36 1817k\r 80  334M   80  267M    0     0  1912k      0  0:02:59  0:02:23  0:00:36 1568k\r 80  334M   80  269M    0     0  1912k      0  0:02:58  0:02:24  0:00:34 1308k\r 80  334M   80  270M    0     0  1903k      0  0:02:59  0:02:25  0:00:34  918k\r 81  334M   81  271M    0     0  1902k      0  0:02:59  0:02:26  0:00:33 1711k\r 81  334M   81  272M    0     0  1898k      0  0:03:00  0:02:27  0:00:33 1467k\r 81  334M   81  274M    0     0  1894k      0  0:03:00  0:02:28  0:00:32 1356k\r 82  334M   82  275M    0     0  1890k      0  0:03:01  0:02:29  0:00:32 1239k\r 82  334M   82  276M    0     0  1886k      0  0:03:01  0:02:30  0:00:31 1376k\r 83  334M   83  278M    0     0  1883k      0  0:03:01  0:02:31  0:00:30 1344k\r 83  334M   83  279M    0     0  1880k      0  0:03:01  0:02:32  0:00:29 1362k\r 83  334M   83  280M    0     0  1876k      0  0:03:02  0:02:33  0:00:29 1357k\r 84  334M   84  282M    0     0  1873k      0  0:03:02  0:02:34  0:00:28 1381k\r 84  334M   84  283M    0     0  1871k      0  0:03:02  0:02:35  0:00:27 1422k\r 85  334M   85  285M    0     0  1870k      0  0:03:02  0:02:36  0:00:26 1476k\r 85  334M   85  287M    0     0  1871k      0  0:03:02  0:02:37  0:00:25 1587k\r 86  334M   86  288M    0     0  1868k      0  0:03:03  0:02:38  0:00:25 1630k\r 87  334M   87  291M    0     0  1872k      0  0:03:02  0:02:39  0:00:23 1840k\r 87  334M   87  293M    0     0  1873k      0  0:03:02  0:02:40  0:00:22 1937k\r 88  334M   88  295M    0     0  1875k      0  0:03:02  0:02:41  0:00:21 2026k\r 88  334M   88  297M    0     0  1878k      0  0:03:02  0:02:42  0:00:20 2089k\r 89  334M   89  299M    0     0  1881k      0  0:03:01  0:02:43  0:00:18 2281k\r 90  334M   90  302M    0     0  1885k      0  0:03:01  0:02:44  0:00:17 2294k\r 91  334M   91  304M    0     0  1890k      0  0:03:01  0:02:45  0:00:16 2415k\r 91  334M   91  307M    0     0  1893k      0  0:03:00  0:02:46  0:00:14 2485k\r 92  334M   92  309M    0     0  1896k      0  0:03:00  0:02:47  0:00:13 2485k\r 93  334M   93  312M    0     0  1900k      0  0:03:00  0:02:48  0:00:12 2532k\r 93  334M   93  314M    0     0  1901k      0  0:02:59  0:02:49  0:00:10 2445k\r 94  334M   94  316M    0     0  1905k      0  0:02:59  0:02:50  0:00:09 2423k\r 95  334M   95  318M    0     0  1906k      0  0:02:59  0:02:51  0:00:08 2316k\r 95  334M   95  320M    0     0  1907k      0  0:02:59  0:02:52  0:00:07 2285k\r 96  334M   96  322M    0     0  1907k      0  0:02:59  0:02:53  0:00:06 2122k\r 97  334M   97  324M    0     0  1906k      0  0:02:59  0:02:54  0:00:05 2074k\r 97  334M   97  326M    0     0  1906k      0  0:02:59  0:02:55  0:00:04 1931k\r 98  334M   98  327M    0     0  1906k      0  0:02:59  0:02:56  0:00:03 1922k\r 98  334M   98  330M    0     0  1907k      0  0:02:59  0:02:57  0:00:02 1898k\r 99  334M   99  331M    0     0  1902k      0  0:02:59  0:02:58  0:00:01 1753k\r 99  334M   99  333M    0     0  1907k      0  0:02:59  0:02:59 --:--:-- 1935k\r100  334M  100  334M    0     0  1907k      0  0:02:59  0:02:59 --:--:-- 1960k\n0+17762 records in\n0+17762 records out\n645262336 bytes (645 MB, 615 MiB) copied, 213.47 s, 3.0 MB/s\n+ sync\n+ partprobe /dev/sda\n+ mount /dev/sda2 /mnt\n+ cp -a /snap/cm3-installer/6/extrausers /mnt/system-data/var/lib/\n+ mkdir -p /mnt/user-data/ubuntu\n+ chown -R 1000.1000 /mnt/user-data/ubuntu\n+ mkdir -p /mnt/system-data/etc/sudoers.d\n+ echo 'ubuntu ALL=(ALL) NOPASSWD:ALL'\n+ umount /mnt\n"
2018-06-03 04:45:34,778 cm3-001 INFO: b"Warning: Permanently added '10.101.50.180' (ECDSA) to the list of known hosts.\r\n"
2018-06-03 04:45:46,150 cm3-001 INFO: Running snmpset -c private -v1 10.101.48.8 .1.3.6.1.4.1.318.1.1.12.3.3.1.1.4.1 i 2
iso.3.6.1.4.1.318.1.1.12.3.3.1.1.4.1 = INTEGER: 2
2018-06-03 04:45:46,268 cm3-001 INFO: Running sleep 10
2018-06-03 04:45:56,293 cm3-001 INFO: Running snmpset -c private -v1 10.101.48.8 .1.3.6.1.4.1.318.1.1.12.3.3.1.1.4.1 i 1
iso.3.6.1.4.1.318.1.1.12.3.3.1.1.4.1 = INTEGER: 1
2018-06-03 04:45:56,410 cm3-001 INFO: Checking if test image booted.
2018-06-03 04:46:37,927 cm3-001 INFO: END provision

**********************************
* Starting test phase on cm3-001 *

**********************************
Install python-logstash if you want to use logstash logging
2018-06-03 04:46:42,070 cm3-001 INFO: BEGIN testrun

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Get:1 http://security.ubuntu.com/ubuntu xenial-security InRelease [107 kB]
Hit:2 http://archive.ubuntu.com/ubuntu xenial InRelease
Get:3 http://archive.ubuntu.com/ubuntu xenial-updates InRelease [109 kB]
Get:4 http://security.ubuntu.com/ubuntu xenial-security/universe Sources [81.2 kB]
Get:5 http://archive.ubuntu.com/ubuntu xenial-backports InRelease [107 kB]
Get:6 http://security.ubuntu.com/ubuntu xenial-security/main amd64 Packages [637 kB]
Get:7 http://archive.ubuntu.com/ubuntu xenial-updates/universe Sources [256 kB]
Get:8 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 Packages [1012 kB]
Get:9 http://security.ubuntu.com/ubuntu xenial-security/restricted amd64 Packages [12.7 kB]
Get:10 http://security.ubuntu.com/ubuntu xenial-security/universe amd64 Packages [445 kB]
Get:11 http://security.ubuntu.com/ubuntu xenial-security/multiverse amd64 Packages [3743 B]
Get:12 http://archive.ubuntu.com/ubuntu xenial-updates/restricted amd64 Packages [13.1 kB]
Get:13 http://archive.ubuntu.com/ubuntu xenial-updates/universe amd64 Packages [814 kB]
Get:14 http://archive.ubuntu.com/ubuntu xenial-updates/multiverse amd64 Packages [18.8 kB]
Get:15 http://archive.ubuntu.com/ubuntu xenial-backports/universe amd64 Packages [8068 B]
Fetched 3625 kB in 3s (971 kB/s)
Reading package lists...
Building dependency tree...
Reading state information...
3 packages can be upgraded. Run 'apt list --upgradable' to see them.

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
The following additional packages will be installed:
  git-man ifupdown iproute2 isc-dhcp-client isc-dhcp-common less
  libasn1-8-heimdal libatm1 libcurl3-gnutls libdns-export162 liberror-perl
  libgdbm3 libgmp10 libgnutls30 libgssapi3-heimdal libhcrypto4-heimdal
  libheimbase1-heimdal libheimntlm0-heimdal libhogweed4 libhx509-5-heimdal
  libisc-export160 libkrb5-26-heimdal libldap-2.4-2 libmnl0 libnettle6
  libp11-kit0 libperl5.22 libpopt0 libroken18-heimdal librtmp1 libsasl2-2
  libsasl2-modules libsasl2-modules-db libtasn1-6 libwind0-heimdal
  libxtables11 netbase patch perl perl-modules-5.22 rename rsync
Suggested packages:
  gettext-base git-daemon-run | git-daemon-sysvinit git-doc git-el git-email
  git-gui gitk gitweb git-arch git-cvs git-mediawiki git-svn ppp rdnssd
  iproute2-doc resolvconf avahi-autoipd isc-dhcp-client-ddns apparmor
  gnutls-bin libsasl2-modules-otp libsasl2-modules-ldap libsasl2-modules-sql
  libsasl2-modules-gssapi-mit | libsasl2-modules-gssapi-heimdal ed
  diffutils-doc perl-doc libterm-readline-gnu-perl
  | libterm-readline-perl-perl make openssh-server
The following NEW packages will be installed:
  curl git git-man ifupdown iproute2 isc-dhcp-client isc-dhcp-common less
  libasn1-8-heimdal libatm1 libcurl3-gnutls libdns-export162 liberror-perl
  libgdbm3 libgmp10 libgnutls30 libgssapi3-heimdal libhcrypto4-heimdal
  libheimbase1-heimdal libheimntlm0-heimdal libhogweed4 libhx509-5-heimdal
  libisc-export160 libkrb5-26-heimdal libldap-2.4-2 libmnl0 libnettle6
  libp11-kit0 libperl5.22 libpopt0 libroken18-heimdal librtmp1 libsasl2-2
  libsasl2-modules libsasl2-modules-db libtasn1-6 libwind0-heimdal
  libxtables11 netbase patch perl perl-modules-5.22 rename rsync sshpass
0 upgraded, 45 newly installed, 0 to remove and 3 not upgraded.
Need to get 15.1 MB of archives.
After this operation, 79.7 MB of additional disk space will be used.
Get:1 http://archive.ubuntu.com/ubuntu xenial/main amd64 libatm1 amd64 1:2.5.1-1.5 [24.2 kB]
Get:2 http://archive.ubuntu.com/ubuntu xenial/main amd64 libmnl0 amd64 1.0.3-5 [12.0 kB]
Get:3 http://archive.ubuntu.com/ubuntu xenial/main amd64 libpopt0 amd64 1.16-10 [26.0 kB]
Get:4 http://archive.ubuntu.com/ubuntu xenial/main amd64 libgdbm3 amd64 1.8.3-13.1 [16.9 kB]
Get:5 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 perl-modules-5.22 all 5.22.1-9ubuntu0.3 [2646 kB]
Get:6 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libperl5.22 amd64 5.22.1-9ubuntu0.3 [3402 kB]
Get:7 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 perl amd64 5.22.1-9ubuntu0.3 [237 kB]
Get:8 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 iproute2 amd64 4.3.0-1ubuntu3.16.04.3 [522 kB]
Get:9 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 ifupdown amd64 0.8.10ubuntu1.4 [54.9 kB]
Get:10 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libisc-export160 amd64 1:9.10.3.dfsg.P4-8ubuntu1.10 [153 kB]
Get:11 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libdns-export162 amd64 1:9.10.3.dfsg.P4-8ubuntu1.10 [666 kB]
Get:12 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 isc-dhcp-client amd64 4.3.3-5ubuntu12.10 [224 kB]
Get:13 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 isc-dhcp-common amd64 4.3.3-5ubuntu12.10 [105 kB]
Get:14 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 less amd64 481-2.1ubuntu0.2 [110 kB]
Get:15 http://archive.ubuntu.com/ubuntu xenial/main amd64 libgmp10 amd64 2:6.1.0+dfsg-2 [240 kB]
Get:16 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libnettle6 amd64 3.2-1ubuntu0.16.04.1 [93.5 kB]
Get:17 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libhogweed4 amd64 3.2-1ubuntu0.16.04.1 [136 kB]
Get:18 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libp11-kit0 amd64 0.23.2-5~ubuntu16.04.1 [105 kB]
Get:19 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libtasn1-6 amd64 4.7-3ubuntu0.16.04.3 [43.5 kB]
Get:20 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libgnutls30 amd64 3.4.10-4ubuntu1.4 [548 kB]
Get:21 http://archive.ubuntu.com/ubuntu xenial/main amd64 libxtables11 amd64 1.6.0-2ubuntu3 [27.2 kB]
Get:22 http://archive.ubuntu.com/ubuntu xenial/main amd64 netbase all 5.3 [12.9 kB]
Get:23 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libroken18-heimdal amd64 1.7~git20150920+dfsg-4ubuntu1.16.04.1 [41.4 kB]
Get:24 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libasn1-8-heimdal amd64 1.7~git20150920+dfsg-4ubuntu1.16.04.1 [174 kB]
Get:25 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libhcrypto4-heimdal amd64 1.7~git20150920+dfsg-4ubuntu1.16.04.1 [85.0 kB]
Get:26 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libheimbase1-heimdal amd64 1.7~git20150920+dfsg-4ubuntu1.16.04.1 [29.3 kB]
Get:27 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libwind0-heimdal amd64 1.7~git20150920+dfsg-4ubuntu1.16.04.1 [47.8 kB]
Get:28 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libhx509-5-heimdal amd64 1.7~git20150920+dfsg-4ubuntu1.16.04.1 [107 kB]
Get:29 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libkrb5-26-heimdal amd64 1.7~git20150920+dfsg-4ubuntu1.16.04.1 [202 kB]
Get:30 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libheimntlm0-heimdal amd64 1.7~git20150920+dfsg-4ubuntu1.16.04.1 [15.1 kB]
Get:31 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libgssapi3-heimdal amd64 1.7~git20150920+dfsg-4ubuntu1.16.04.1 [96.1 kB]
Get:32 http://archive.ubuntu.com/ubuntu xenial/main amd64 libsasl2-modules-db amd64 2.1.26.dfsg1-14build1 [14.5 kB]
Get:33 http://archive.ubuntu.com/ubuntu xenial/main amd64 libsasl2-2 amd64 2.1.26.dfsg1-14build1 [48.7 kB]
Get:34 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libldap-2.4-2 amd64 2.4.42+dfsg-2ubuntu3.2 [160 kB]
Get:35 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 librtmp1 amd64 2.4+20151223.gitfa8646d-1ubuntu0.1 [54.4 kB]
Get:36 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libcurl3-gnutls amd64 7.47.0-1ubuntu2.8 [185 kB]
Get:37 http://archive.ubuntu.com/ubuntu xenial/main amd64 libsasl2-modules amd64 2.1.26.dfsg1-14build1 [47.5 kB]
Get:38 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 rsync amd64 3.1.1-3ubuntu1.2 [329 kB]
Get:39 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 curl amd64 7.47.0-1ubuntu2.8 [139 kB]
Get:40 http://archive.ubuntu.com/ubuntu xenial/main amd64 liberror-perl all 0.17-1.2 [19.6 kB]
Get:41 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 git-man all 1:2.7.4-0ubuntu1.3 [736 kB]
Get:42 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 git amd64 1:2.7.4-0ubuntu1.3 [3102 kB]
Get:43 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 patch amd64 2.7.5-1ubuntu0.16.04.1 [90.5 kB]
Get:44 http://archive.ubuntu.com/ubuntu xenial/main amd64 rename all 0.20-4 [12.0 kB]
Get:45 http://archive.ubuntu.com/ubuntu xenial/universe amd64 sshpass amd64 1.05-1 [10.5 kB]
debconf: delaying package configuration, since apt-utils is not installed
Fetched 15.1 MB in 7s (2098 kB/s)
Selecting previously unselected package libatm1:amd64.
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 9573 files and directories currently installed.)
Preparing to unpack .../libatm1_1%3a2.5.1-1.5_amd64.deb ...
Unpacking libatm1:amd64 (1:2.5.1-1.5) ...
Selecting previously unselected package libmnl0:amd64.
Preparing to unpack .../libmnl0_1.0.3-5_amd64.deb ...
Unpacking libmnl0:amd64 (1.0.3-5) ...
Selecting previously unselected package libpopt0:amd64.
Preparing to unpack .../libpopt0_1.16-10_amd64.deb ...
Unpacking libpopt0:amd64 (1.16-10) ...
Selecting previously unselected package libgdbm3:amd64.
Preparing to unpack .../libgdbm3_1.8.3-13.1_amd64.deb ...
Unpacking libgdbm3:amd64 (1.8.3-13.1) ...
Selecting previously unselected package perl-modules-5.22.
Preparing to unpack .../perl-modules-5.22_5.22.1-9ubuntu0.3_all.deb ...
Unpacking perl-modules-5.22 (5.22.1-9ubuntu0.3) ...
Selecting previously unselected package libperl5.22:amd64.
Preparing to unpack .../libperl5.22_5.22.1-9ubuntu0.3_amd64.deb ...
Unpacking libperl5.22:amd64 (5.22.1-9ubuntu0.3) ...
Selecting previously unselected package perl.
Preparing to unpack .../perl_5.22.1-9ubuntu0.3_amd64.deb ...
Unpacking perl (5.22.1-9ubuntu0.3) ...
Selecting previously unselected package iproute2.
Preparing to unpack .../iproute2_4.3.0-1ubuntu3.16.04.3_amd64.deb ...
Unpacking iproute2 (4.3.0-1ubuntu3.16.04.3) ...
Selecting previously unselected package ifupdown.
Preparing to unpack .../ifupdown_0.8.10ubuntu1.4_amd64.deb ...
Unpacking ifupdown (0.8.10ubuntu1.4) ...
Selecting previously unselected package libisc-export160.
Preparing to unpack .../libisc-export160_1%3a9.10.3.dfsg.P4-8ubuntu1.10_amd64.deb ...
Unpacking libisc-export160 (1:9.10.3.dfsg.P4-8ubuntu1.10) ...
Selecting previously unselected package libdns-export162.
Preparing to unpack .../libdns-export162_1%3a9.10.3.dfsg.P4-8ubuntu1.10_amd64.deb ...
Unpacking libdns-export162 (1:9.10.3.dfsg.P4-8ubuntu1.10) ...
Selecting previously unselected package isc-dhcp-client.
Preparing to unpack .../isc-dhcp-client_4.3.3-5ubuntu12.10_amd64.deb ...
Unpacking isc-dhcp-client (4.3.3-5ubuntu12.10) ...
Selecting previously unselected package isc-dhcp-common.
Preparing to unpack .../isc-dhcp-common_4.3.3-5ubuntu12.10_amd64.deb ...
Unpacking isc-dhcp-common (4.3.3-5ubuntu12.10) ...
Selecting previously unselected package less.
Preparing to unpack .../less_481-2.1ubuntu0.2_amd64.deb ...
Unpacking less (481-2.1ubuntu0.2) ...
Selecting previously unselected package libgmp10:amd64.
Preparing to unpack .../libgmp10_2%3a6.1.0+dfsg-2_amd64.deb ...
Unpacking libgmp10:amd64 (2:6.1.0+dfsg-2) ...
Selecting previously unselected package libnettle6:amd64.
Preparing to unpack .../libnettle6_3.2-1ubuntu0.16.04.1_amd64.deb ...
Unpacking libnettle6:amd64 (3.2-1ubuntu0.16.04.1) ...
Selecting previously unselected package libhogweed4:amd64.
Preparing to unpack .../libhogweed4_3.2-1ubuntu0.16.04.1_amd64.deb ...
Unpacking libhogweed4:amd64 (3.2-1ubuntu0.16.04.1) ...
Selecting previously unselected package libp11-kit0:amd64.
Preparing to unpack .../libp11-kit0_0.23.2-5~ubuntu16.04.1_amd64.deb ...
Unpacking libp11-kit0:amd64 (0.23.2-5~ubuntu16.04.1) ...
Selecting previously unselected package libtasn1-6:amd64.
Preparing to unpack .../libtasn1-6_4.7-3ubuntu0.16.04.3_amd64.deb ...
Unpacking libtasn1-6:amd64 (4.7-3ubuntu0.16.04.3) ...
Selecting previously unselected package libgnutls30:amd64.
Preparing to unpack .../libgnutls30_3.4.10-4ubuntu1.4_amd64.deb ...
Unpacking libgnutls30:amd64 (3.4.10-4ubuntu1.4) ...
Selecting previously unselected package libxtables11:amd64.
Preparing to unpack .../libxtables11_1.6.0-2ubuntu3_amd64.deb ...
Unpacking libxtables11:amd64 (1.6.0-2ubuntu3) ...
Selecting previously unselected package netbase.
Preparing to unpack .../archives/netbase_5.3_all.deb ...
Unpacking netbase (5.3) ...
Selecting previously unselected package libroken18-heimdal:amd64.
Preparing to unpack .../libroken18-heimdal_1.7~git20150920+dfsg-4ubuntu1.16.04.1_amd64.deb ...
Unpacking libroken18-heimdal:amd64 (1.7~git20150920+dfsg-4ubuntu1.16.04.1) ...
Selecting previously unselected package libasn1-8-heimdal:amd64.
Preparing to unpack .../libasn1-8-heimdal_1.7~git20150920+dfsg-4ubuntu1.16.04.1_amd64.deb ...
Unpacking libasn1-8-heimdal:amd64 (1.7~git20150920+dfsg-4ubuntu1.16.04.1) ...
Selecting previously unselected package libhcrypto4-heimdal:amd64.
Preparing to unpack .../libhcrypto4-heimdal_1.7~git20150920+dfsg-4ubuntu1.16.04.1_amd64.deb ...
Unpacking libhcrypto4-heimdal:amd64 (1.7~git20150920+dfsg-4ubuntu1.16.04.1) ...
Selecting previously unselected package libheimbase1-heimdal:amd64.
Preparing to unpack .../libheimbase1-heimdal_1.7~git20150920+dfsg-4ubuntu1.16.04.1_amd64.deb ...
Unpacking libheimbase1-heimdal:amd64 (1.7~git20150920+dfsg-4ubuntu1.16.04.1) ...
Selecting previously unselected package libwind0-heimdal:amd64.
Preparing to unpack .../libwind0-heimdal_1.7~git20150920+dfsg-4ubuntu1.16.04.1_amd64.deb ...
Unpacking libwind0-heimdal:amd64 (1.7~git20150920+dfsg-4ubuntu1.16.04.1) ...
Selecting previously unselected package libhx509-5-heimdal:amd64.
Preparing to unpack .../libhx509-5-heimdal_1.7~git20150920+dfsg-4ubuntu1.16.04.1_amd64.deb ...
Unpacking libhx509-5-heimdal:amd64 (1.7~git20150920+dfsg-4ubuntu1.16.04.1) ...
Selecting previously unselected package libkrb5-26-heimdal:amd64.
Preparing to unpack .../libkrb5-26-heimdal_1.7~git20150920+dfsg-4ubuntu1.16.04.1_amd64.deb ...
Unpacking libkrb5-26-heimdal:amd64 (1.7~git20150920+dfsg-4ubuntu1.16.04.1) ...
Selecting previously unselected package libheimntlm0-heimdal:amd64.
Preparing to unpack .../libheimntlm0-heimdal_1.7~git20150920+dfsg-4ubuntu1.16.04.1_amd64.deb ...
Unpacking libheimntlm0-heimdal:amd64 (1.7~git20150920+dfsg-4ubuntu1.16.04.1) ...
Selecting previously unselected package libgssapi3-heimdal:amd64.
Preparing to unpack .../libgssapi3-heimdal_1.7~git20150920+dfsg-4ubuntu1.16.04.1_amd64.deb ...
Unpacking libgssapi3-heimdal:amd64 (1.7~git20150920+dfsg-4ubuntu1.16.04.1) ...
Selecting previously unselected package libsasl2-modules-db:amd64.
Preparing to unpack .../libsasl2-modules-db_2.1.26.dfsg1-14build1_amd64.deb ...
Unpacking libsasl2-modules-db:amd64 (2.1.26.dfsg1-14build1) ...
Selecting previously unselected package libsasl2-2:amd64.
Preparing to unpack .../libsasl2-2_2.1.26.dfsg1-14build1_amd64.deb ...
Unpacking libsasl2-2:amd64 (2.1.26.dfsg1-14build1) ...
Selecting previously unselected package libldap-2.4-2:amd64.
Preparing to unpack .../libldap-2.4-2_2.4.42+dfsg-2ubuntu3.2_amd64.deb ...
Unpacking libldap-2.4-2:amd64 (2.4.42+dfsg-2ubuntu3.2) ...
Selecting previously unselected package librtmp1:amd64.
Preparing to unpack .../librtmp1_2.4+20151223.gitfa8646d-1ubuntu0.1_amd64.deb ...
Unpacking librtmp1:amd64 (2.4+20151223.gitfa8646d-1ubuntu0.1) ...
Selecting previously unselected package libcurl3-gnutls:amd64.
Preparing to unpack .../libcurl3-gnutls_7.47.0-1ubuntu2.8_amd64.deb ...
Unpacking libcurl3-gnutls:amd64 (7.47.0-1ubuntu2.8) ...
Selecting previously unselected package libsasl2-modules:amd64.
Preparing to unpack .../libsasl2-modules_2.1.26.dfsg1-14build1_amd64.deb ...
Unpacking libsasl2-modules:amd64 (2.1.26.dfsg1-14build1) ...
Selecting previously unselected package rsync.
Preparing to unpack .../rsync_3.1.1-3ubuntu1.2_amd64.deb ...
Unpacking rsync (3.1.1-3ubuntu1.2) ...
Selecting previously unselected package curl.
Preparing to unpack .../curl_7.47.0-1ubuntu2.8_amd64.deb ...
Unpacking curl (7.47.0-1ubuntu2.8) ...
Selecting previously unselected package liberror-perl.
Preparing to unpack .../liberror-perl_0.17-1.2_all.deb ...
Unpacking liberror-perl (0.17-1.2) ...
Selecting previously unselected package git-man.
Preparing to unpack .../git-man_1%3a2.7.4-0ubuntu1.3_all.deb ...
Unpacking git-man (1:2.7.4-0ubuntu1.3) ...
Selecting previously unselected package git.
Preparing to unpack .../git_1%3a2.7.4-0ubuntu1.3_amd64.deb ...
Unpacking git (1:2.7.4-0ubuntu1.3) ...
Selecting previously unselected package patch.
Preparing to unpack .../patch_2.7.5-1ubuntu0.16.04.1_amd64.deb ...
Unpacking patch (2.7.5-1ubuntu0.16.04.1) ...
Selecting previously unselected package rename.
Preparing to unpack .../archives/rename_0.20-4_all.deb ...
Unpacking rename (0.20-4) ...
Selecting previously unselected package sshpass.
Preparing to unpack .../sshpass_1.05-1_amd64.deb ...
Unpacking sshpass (1.05-1) ...
Processing triggers for systemd (229-4ubuntu21.2) ...
Processing triggers for libc-bin (2.23-0ubuntu10) ...
Processing triggers for mime-support (3.59ubuntu1) ...
Setting up libatm1:amd64 (1:2.5.1-1.5) ...
Setting up libmnl0:amd64 (1.0.3-5) ...
Setting up libpopt0:amd64 (1.16-10) ...
Setting up libgdbm3:amd64 (1.8.3-13.1) ...
Setting up perl-modules-5.22 (5.22.1-9ubuntu0.3) ...
Setting up libperl5.22:amd64 (5.22.1-9ubuntu0.3) ...
Setting up perl (5.22.1-9ubuntu0.3) ...
update-alternatives: using /usr/bin/prename to provide /usr/bin/rename (rename) in auto mode
Setting up iproute2 (4.3.0-1ubuntu3.16.04.3) ...
Setting up ifupdown (0.8.10ubuntu1.4) ...
Creating /etc/network/interfaces.
Setting up libisc-export160 (1:9.10.3.dfsg.P4-8ubuntu1.10) ...
Setting up libdns-export162 (1:9.10.3.dfsg.P4-8ubuntu1.10) ...
Setting up isc-dhcp-client (4.3.3-5ubuntu12.10) ...
Setting up isc-dhcp-common (4.3.3-5ubuntu12.10) ...
Setting up less (481-2.1ubuntu0.2) ...
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 76.)
debconf: falling back to frontend: Readline
Setting up libgmp10:amd64 (2:6.1.0+dfsg-2) ...
Setting up libnettle6:amd64 (3.2-1ubuntu0.16.04.1) ...
Setting up libhogweed4:amd64 (3.2-1ubuntu0.16.04.1) ...
Setting up libp11-kit0:amd64 (0.23.2-5~ubuntu16.04.1) ...
Setting up libtasn1-6:amd64 (4.7-3ubuntu0.16.04.3) ...
Setting up libgnutls30:amd64 (3.4.10-4ubuntu1.4) ...
Setting up libxtables11:amd64 (1.6.0-2ubuntu3) ...
Setting up netbase (5.3) ...
Setting up libroken18-heimdal:amd64 (1.7~git20150920+dfsg-4ubuntu1.16.04.1) ...
Setting up libasn1-8-heimdal:amd64 (1.7~git20150920+dfsg-4ubuntu1.16.04.1) ...
Setting up libhcrypto4-heimdal:amd64 (1.7~git20150920+dfsg-4ubuntu1.16.04.1) ...
Setting up libheimbase1-heimdal:amd64 (1.7~git20150920+dfsg-4ubuntu1.16.04.1) ...
Setting up libwind0-heimdal:amd64 (1.7~git20150920+dfsg-4ubuntu1.16.04.1) ...
Setting up libhx509-5-heimdal:amd64 (1.7~git20150920+dfsg-4ubuntu1.16.04.1) ...
Setting up libkrb5-26-heimdal:amd64 (1.7~git20150920+dfsg-4ubuntu1.16.04.1) ...
Setting up libheimntlm0-heimdal:amd64 (1.7~git20150920+dfsg-4ubuntu1.16.04.1) ...
Setting up libgssapi3-heimdal:amd64 (1.7~git20150920+dfsg-4ubuntu1.16.04.1) ...
Setting up libsasl2-modules-db:amd64 (2.1.26.dfsg1-14build1) ...
Setting up libsasl2-2:amd64 (2.1.26.dfsg1-14build1) ...
Setting up libldap-2.4-2:amd64 (2.4.42+dfsg-2ubuntu3.2) ...
Setting up librtmp1:amd64 (2.4+20151223.gitfa8646d-1ubuntu0.1) ...
Setting up libcurl3-gnutls:amd64 (7.47.0-1ubuntu2.8) ...
Setting up libsasl2-modules:amd64 (2.1.26.dfsg1-14build1) ...
Setting up rsync (3.1.1-3ubuntu1.2) ...
invoke-rc.d: could not determine current runlevel
invoke-rc.d: policy-rc.d denied execution of restart.
Setting up curl (7.47.0-1ubuntu2.8) ...
Setting up liberror-perl (0.17-1.2) ...
Setting up git-man (1:2.7.4-0ubuntu1.3) ...
Setting up git (1:2.7.4-0ubuntu1.3) ...
Setting up patch (2.7.5-1ubuntu0.16.04.1) ...
Setting up rename (0.20-4) ...
update-alternatives: using /usr/bin/file-rename to provide /usr/bin/rename (rename) in auto mode
Setting up sshpass (1.05-1) ...
Processing triggers for libc-bin (2.23-0ubuntu10) ...
Processing triggers for systemd (229-4ubuntu21.2) ...
Cloning into 'snappy-qa-jobs'...
Already on 'master'
Your branch is up-to-date with 'origin/master'.
Cloning into 'snapd'...
Already on 'master'
Your branch is up-to-date with 'origin/master'.
++ INSTANCE_IP=10.101.50.181
++ INSTANCE_PORT=22
++ USER=ubuntu
++ execute_remote 'sudo adduser --extrausers --quiet --disabled-password --gecos '\'''\'' test'
++ ssh -q -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -p 22 ubuntu@10.101.50.181 'sudo adduser --extrausers --quiet --disabled-password --gecos '\'''\'' test'
ENTER EXTRAUSERS_GROUP_FILEEXIT EXTRAUSERS_GROUP_FILEENTER EXTRAUSERS_SHADOWGROUP_FILEEXIT EXTRAUSERS_SHADOWGROUP_FILE++ execute_remote 'echo test:ubuntu | sudo chpasswd'
++ ssh -q -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -p 22 ubuntu@10.101.50.181 'echo test:ubuntu | sudo chpasswd'
++ execute_remote 'echo '\''test ALL=(ALL) NOPASSWD:ALL'\'' | sudo tee /etc/sudoers.d/create-user-test'
++ ssh -q -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -p 22 ubuntu@10.101.50.181 'echo '\''test ALL=(ALL) NOPASSWD:ALL'\'' | sudo tee /etc/sudoers.d/create-user-test'
test ALL=(ALL) NOPASSWD:ALL
+ . snappy-qa-jobs/scripts/utils/register_device.sh 10.101.50.181 22 test ubuntu sergiocazzolato@yahoo.com.ar
++ echo 'Register device'
Register device
++ '[' 5 -ne 5 ']'
++ DEVICE_IP=10.101.50.181
++ DEVICE_PORT=22
++ USER=test
++ PASS=ubuntu
++ EMAIL=sergiocazzolato@yahoo.com.ar
++ SCRIPT='sudo snap create-user sergiocazzolato@yahoo.com.ar ||         ( sudo snap install jq;         sudo cp /var/lib/snapd/state.json /var/lib/snapd/state.json.bak;         sudo cat /var/lib/snapd/state.json.bak | jq -r '\''.data.auth.users=[]'\'' | sudo tee /var/lib/snapd/state.json > /dev/null;         sudo systemctl stop snapd.service snapd.socket;         sudo systemctl start snapd.service snapd.socket;         sudo snap create-user sergiocazzolato@yahoo.com.ar;         sudo snap remove jq )'
++ '[' -z sergiocazzolato@yahoo.com.ar ']'
++ '[' -z ubuntu ']'
++ echo 'Registering device (with pass): sudo snap create-user sergiocazzolato@yahoo.com.ar ||         ( sudo snap install jq;         sudo cp /var/lib/snapd/state.json /var/lib/snapd/state.json.bak;         sudo cat /var/lib/snapd/state.json.bak | jq -r '\''.data.auth.users=[]'\'' | sudo tee /var/lib/snapd/state.json > /dev/null;         sudo systemctl stop snapd.service snapd.socket;         sudo systemctl start snapd.service snapd.socket;         sudo snap create-user sergiocazzolato@yahoo.com.ar;         sudo snap remove jq )'
Registering device (with pass): sudo snap create-user sergiocazzolato@yahoo.com.ar ||         ( sudo snap install jq;         sudo cp /var/lib/snapd/state.json /var/lib/snapd/state.json.bak;         sudo cat /var/lib/snapd/state.json.bak | jq -r '.data.auth.users=[]' | sudo tee /var/lib/snapd/state.json > /dev/null;         sudo systemctl stop snapd.service snapd.socket;         sudo systemctl start snapd.service snapd.socket;         sudo snap create-user sergiocazzolato@yahoo.com.ar;         sudo snap remove jq )
++ sshpass -p ubuntu ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -p 22 test@10.101.50.181 'sudo snap create-user sergiocazzolato@yahoo.com.ar ||         ( sudo snap install jq;         sudo cp /var/lib/snapd/state.json /var/lib/snapd/state.json.bak;         sudo cat /var/lib/snapd/state.json.bak | jq -r '\''.data.auth.users=[]'\'' | sudo tee /var/lib/snapd/state.json > /dev/null;         sudo systemctl stop snapd.service snapd.socket;         sudo systemctl start snapd.service snapd.socket;         sudo snap create-user sergiocazzolato@yahoo.com.ar;         sudo snap remove jq )'
Warning: Permanently added '10.101.50.181' (ECDSA) to the list of known hosts.
created user "snappytestaccount1"
+ . snappy-qa-jobs/scripts/utils/refresh.sh 10.101.50.181 22 test ubuntu stable edge
++ echo 'Refresh core on device'
Refresh core on device
++ '[' 6 -ne 6 ']'
++ DEVICE_IP=10.101.50.181
++ DEVICE_PORT=22
++ USER=test
++ PASS=ubuntu
++ CHANNEL=stable
++ CORE_CHANNEL=edge
++ execute_remote 'snap changes'
++ '[' -z ubuntu ']'
++ sshpass -p ubuntu ssh -p 22 -q -o ConnectTimeout=10 -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no test@10.101.50.181 'snap changes'
++ grep -q -E 'Doing.*Auto-refresh snap.*'
++ '[' -z edge ']'
++ '[' stable = edge ']'
++ do_core_refresh edge core
++ refresh_channel=edge
++ execute_remote 'sudo snap refresh --edge core'
++ '[' -z ubuntu ']'
++ sshpass -p ubuntu ssh -p 22 -q -o ConnectTimeout=10 -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no test@10.101.50.181 'sudo snap refresh --edge core'
2018-06-03T04:50:15Z INFO Waiting for restart...
2018-06-03T04:51:29Z INFO Waiting for restart...
2018-06-03T04:51:59Z INFO Waiting for restart...
2018-06-03T04:52:01Z INFO Waiting for restart...
2018-06-03T04:52:02Z INFO Waiting for restart...
2018-06-03T04:52:03Z INFO Waiting for restart...
2018-06-03T04:52:04Z INFO Waiting for restart...
2018-06-03T04:57:04Z INFO Waiting for restart...
2018-06-03T04:57:18Z INFO Waiting for restart...
Connection to 10.101.50.181 closed by remote host.
++ true
++ check_refresh edge
++ refresh_channel=edge
++ wait_for_ssh 120 2
++ retries=120
++ sleep=2
++ execute_remote true
++ '[' -z ubuntu ']'
++ sshpass -p ubuntu ssh -p 22 -q -o ConnectTimeout=10 -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no test@10.101.50.181 true
Connection to 10.101.50.181 closed by remote host.
++ retries=119
++ '[' 119 -le 0 ']'
++ sleep 2
++ execute_remote true
++ '[' -z ubuntu ']'
++ sshpass -p ubuntu ssh -p 22 -q -o ConnectTimeout=10 -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no test@10.101.50.181 true
++ retries=118
++ '[' 118 -le 0 ']'
++ sleep 2
++ execute_remote true
++ '[' -z ubuntu ']'
++ sshpass -p ubuntu ssh -p 22 -q -o ConnectTimeout=10 -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no test@10.101.50.181 true
++ retries=117
++ '[' 117 -le 0 ']'
++ sleep 2
++ execute_remote true
++ '[' -z ubuntu ']'
++ sshpass -p ubuntu ssh -p 22 -q -o ConnectTimeout=10 -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no test@10.101.50.181 true
++ retries=116
++ '[' 116 -le 0 ']'
++ sleep 2
++ execute_remote true
++ '[' -z ubuntu ']'
++ sshpass -p ubuntu ssh -p 22 -q -o ConnectTimeout=10 -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no test@10.101.50.181 true
++ retries=115
++ '[' 115 -le 0 ']'
++ sleep 2
++ execute_remote true
++ '[' -z ubuntu ']'
++ sshpass -p ubuntu ssh -p 22 -q -o ConnectTimeout=10 -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no test@10.101.50.181 true
++ retries=114
++ '[' 114 -le 0 ']'
++ sleep 2
++ execute_remote true
++ '[' -z ubuntu ']'
++ sshpass -p ubuntu ssh -p 22 -q -o ConnectTimeout=10 -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no test@10.101.50.181 true
++ retries=113
++ '[' 113 -le 0 ']'
++ sleep 2
++ execute_remote true
++ '[' -z ubuntu ']'
++ sshpass -p ubuntu ssh -p 22 -q -o ConnectTimeout=10 -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no test@10.101.50.181 true
++ retry_until 'snap info core' 'tracking: +edge' 10 2
++ command='snap info core'
++ output='tracking: +edge'
++ retries=10
++ sleep=2
++ execute_remote 'snap info core'
++ '[' -z ubuntu ']'
++ sshpass -p ubuntu ssh -p 22 -q -o ConnectTimeout=10 -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no test@10.101.50.181 'snap info core'
++ grep -q -E 'tracking: +edge'
++ retry_until 'sudo snap install --devmode jq' 'jq .* installed' 20 10
++ command='sudo snap install --devmode jq'
++ output='jq .* installed'
++ retries=20
++ sleep=10
++ execute_remote 'sudo snap install --devmode jq'
++ '[' -z ubuntu ']'
++ grep -q -E 'jq .* installed'
++ sshpass -p ubuntu ssh -p 22 -q -o ConnectTimeout=10 -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no test@10.101.50.181 'sudo snap install --devmode jq'
++ execute_remote 'sudo snap remove jq'
++ '[' -z ubuntu ']'
++ sshpass -p ubuntu ssh -p 22 -q -o ConnectTimeout=10 -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no test@10.101.50.181 'sudo snap remove jq'
jq removed
+ . snappy-qa-jobs/scripts/utils/run_setup.sh 10.101.50.181 22 test ubuntu ''
++ echo 'Running setup command'
Running setup command
++ '[' 5 -ne 5 ']'
++ DEVICE_IP=10.101.50.181
++ DEVICE_PORT=22
++ USER=test
++ PASS=ubuntu
++ SETUP=
++ '[' -z '' ']'
++ echo 'No setup command to run'
No setup command to run
+ . snappy-qa-jobs/scripts/utils/get_spread.sh
++ echo 'Getting spread'
Getting spread
+++ pwd
++ export WORKSPACE=/home/ubuntu
++ WORKSPACE=/home/ubuntu
++ export SPREAD_DIR=/home/ubuntu/spread
++ SPREAD_DIR=/home/ubuntu/spread
++ export PATH=/home/ubuntu/spread:/srv/testflinger-agent/cm3001/env/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ PATH=/home/ubuntu/spread:/srv/testflinger-agent/cm3001/env/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ '[' -f /home/ubuntu/spread/spread ']'
++ mkdir -p /home/ubuntu/spread
++ cd /home/ubuntu/spread
++ curl -s -O https://niemeyer.s3.amazonaws.com/spread-amd64.tar.gz
++ tar xzvf spread-amd64.tar.gz
spread
++ echo 'Spread downloaded and ready to use'
Spread downloaded and ready to use
+ . snappy-qa-jobs/scripts/utils/run_spread.sh 10.101.50.181 22 snapd external:ubuntu-core-16-arm-32:tests/ '' tests/main/auto-refresh,tests/main/interfaces-content -v
++ echo 'Running spread'
Running spread
++ '[' 7 -ne 7 ']'
++ export WORKSPACE=/home/ubuntu
++ WORKSPACE=/home/ubuntu
++ DEVICE_IP=10.101.50.181
++ DEVICE_PORT=22
++ PROJECT_PATH=snapd
++ SPREAD_TESTS=external:ubuntu-core-16-arm-32:tests/
++ SPREAD_ENV=
++ SKIP_TESTS=tests/main/auto-refresh,tests/main/interfaces-content
++ SPREAD_PARAMS=-v
++ '[' -z external:ubuntu-core-16-arm-32:tests/ ']'
++ '[' '!' -z '' ']'
++ export SPREAD_EXTERNAL_ADDRESS=10.101.50.181:22
++ SPREAD_EXTERNAL_ADDRESS=10.101.50.181:22
+++ which spread
++ [[ -n /home/ubuntu/spread/spread ]]
++ echo 'Spread found'
Spread found
++ cd snapd
++ echo 'Moving to manual all the tests to skip: tests/main/auto-refresh,tests/main/interfaces-content'
Moving to manual all the tests to skip: tests/main/auto-refresh,tests/main/interfaces-content
+++ echo tests/main/auto-refresh,tests/main/interfaces-content
+++ tr , ' '
++ tests_skip='tests/main/auto-refresh tests/main/interfaces-content'
++ for test in '$tests_skip'
++ '[' -f tests/main/auto-refresh/task.yaml ']'
++ cp tests/main/auto-refresh/task.yaml tests/main/auto-refresh/task.yaml.back
++ echo 'manual: true'
++ for test in '$tests_skip'
++ '[' -f tests/main/interfaces-content/task.yaml ']'
++ cp tests/main/interfaces-content/task.yaml tests/main/interfaces-content/task.yaml.back
++ echo 'manual: true'
+++ echo -v
+++ tr , ' '
++ spread_params=-v
++ echo 'Running command: spread -v external:ubuntu-core-16-arm-32:tests/'
Running command: spread -v external:ubuntu-core-16-arm-32:tests/
++ spread -v external:ubuntu-core-16-arm-32:tests/
2018-06-03 05:02:17 Found /home/ubuntu/snapd/spread.yaml.
2018-06-03 05:02:19 Project content is packed for delivery (2.79MB).
2018-06-03 05:02:19 Sequence of jobs produced with -seed=1528002139
2018-06-03 05:02:19 If killed, discard servers with: spread -reuse-pid=837 -discard
2018-06-03 05:02:19 Allocating external:ubuntu-core-16-arm-32...
2018-06-03 05:02:19 Waiting for external:ubuntu-core-16-arm-32 to make SSH available at 10.101.50.181:22...
2018-06-03 05:02:19 Allocated external:ubuntu-core-16-arm-32.
2018-06-03 05:02:19 Connecting to external:ubuntu-core-16-arm-32...
2018-06-03 05:02:19 Connected to external:ubuntu-core-16-arm-32 at 10.101.50.181:22.
2018-06-03 05:02:19 Sending project content to external:ubuntu-core-16-arm-32...
2018-06-03 05:02:21 Preparing external:ubuntu-core-16-arm-32...
2018-06-03 05:02:21 Preparing external:ubuntu-core-16-arm-32:tests/main/...
2018-06-03 05:03:40 Preparing external:ubuntu-core-16-arm-32:tests/main/interfaces-broadcom-asic-control...
2018-06-03 05:04:14 Executing external:ubuntu-core-16-arm-32:tests/main/interfaces-broadcom-asic-control (1/193)...
2018-06-03 05:04:23 Restoring external:ubuntu-core-16-arm-32:tests/main/interfaces-broadcom-asic-control...
2018-06-03 05:04:23 Preparing external:ubuntu-core-16-arm-32:tests/main/failover:rclocalcrash...
2018-06-03 05:09:23 WARNING: external:ubuntu-core-16-arm-32 (external:ubuntu-core-16-arm-32:tests/main/failover:rclocalcrash) running late. Current output:
-----
(... 255 lines above ...)
Jun 03 05:04:51 localhost.localdomain systemd[1]: Starting Socket activation for snappy daemon.
Jun 03 05:04:51 localhost.localdomain systemd[1]: Listening on Socket activation for snappy daemon.
Jun 03 05:04:51 localhost.localdomain systemd[1]: Listening on Socket activation for snappy daemon.
+ echo ' test-snapd-rsync'
+ grep -w test-snapd-broadcom-asic-control
+ snap remove test-snapd-broadcom-asic-control
2018-06-03T05:05:46Z ERROR cannot remove snap file "test-snapd-broadcom-asic-control", will retry in 3 mins: [--root / disable snap-test\x2dsnapd\x2dbroadcom\x2dasic\x2dcontrol-x1.mount] failed with exit status 1: Removed symlink /etc/systemd/system/multi-user.target.wants/snap-test\x2dsnapd\x2dbroadcom\x2dasic\x2dcontrol-x1.mount.
Failed to execute operation: Connection timed out

2018-06-03T05:09:11Z ERROR cannot remove snap file "test-snapd-broadcom-asic-control", will retry in 3 mins: [--root / disable snap-test\x2dsnapd\x2dbroadcom\x2dasic\x2dcontrol-x1.mount] failed with exit status 1: Failed to execute operation: Connection timed out
-----
.
2018-06-03 05:14:23 WARNING: external:ubuntu-core-16-arm-32 (external:ubuntu-core-16-arm-32:tests/main/failover:rclocalcrash) running late. Current output:
-----
(...)
2018-06-03T05:12:37Z ERROR cannot remove snap file "test-snapd-broadcom-asic-control", will retry in 3 mins: [--root / disable snap-test\x2dsnapd\x2dbroadcom\x2dasic\x2dcontrol-x1.mount] failed with exit status 1: Failed to execute operation: Connection timed out
-----
.
2018-06-03 05:19:23 WARNING: external:ubuntu-core-16-arm-32 (external:ubuntu-core-16-arm-32:tests/main/failover:rclocalcrash) running late. Current output:
-----
(...)
2018-06-03T05:16:02Z ERROR cannot remove snap file "test-snapd-broadcom-asic-control", will retry in 3 mins: [--root / disable snap-test\x2dsnapd\x2dbroadcom\x2dasic\x2dcontrol-x1.mount] failed with exit status 1: Failed to execute operation: Connection timed out

2018-06-03T05:19:27Z ERROR cannot remove snap file "test-snapd-broadcom-asic-control", will retry in 3 mins: [--root / disable snap-test\x2dsnapd\x2dbroadcom\x2dasic\x2dcontrol-x1.mount] failed with exit status 1: Failed to execute operation: Connection timed out
-----
.
2018-06-03 05:24:22 Error preparing external:ubuntu-core-16-arm-32:tests/main/failover:rclocalcrash : 
-----
+ /home/gopath/src/github.com/snapcore/snapd/tests/lib/prepare-restore.sh --prepare-project-each
+ set -e
+ set -o pipefail
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/quiet.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/boot.sh
++ GRUB_EDITENV=grub-editenv
++ case "$SPREAD_SYSTEM" in
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/dirs.sh
++ export SNAP_MOUNT_DIR=/snap
++ SNAP_MOUNT_DIR=/snap
++ export LIBEXECDIR=/usr/lib
++ LIBEXECDIR=/usr/lib
++ export MEDIA_DIR=/media
++ MEDIA_DIR=/media
++ case "$SPREAD_SYSTEM" in
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/pkgdb.sh
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/quiet.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/random.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/spread-funcs.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/journalctl.sh
++ JOURNALCTL_CURSOR_FILE=/home/gopath/src/github.com/snapcore/snapd/journalctl_cursor
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/state.sh
++ SNAPD_STATE_PATH=/home/gopath/src/github.com/snapcore/snapd/tests/snapd-state
++ SNAPD_STATE_FILE=/home/gopath/src/github.com/snapcore/snapd/tests/snapd-state.tar
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/dirs.sh
+++ export SNAP_MOUNT_DIR=/snap
+++ SNAP_MOUNT_DIR=/snap
+++ export LIBEXECDIR=/usr/lib
+++ LIBEXECDIR=/usr/lib
+++ export MEDIA_DIR=/media
+++ MEDIA_DIR=/media
+++ case "$SPREAD_SYSTEM" in
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/boot.sh
+++ GRUB_EDITENV=grub-editenv
+++ case "$SPREAD_SYSTEM" in
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/systems.sh
+ case "$1" in
+ prepare_project_each
+ start_new_journalctl_log
++ get_last_journalctl_cursor
++ journalctl --output=export -n1
++ grep --binary-files=text -o '__CURSOR=.*'
++ sed -e 's/^__CURSOR=//'
+ cursor='s=0bf798f82dda460195fe7462d0148781;i=381;b=310437c88af546029c662c297174d398;m=a7dfc35;t=56db5c36c884b;x=cf181a6b262c9385'
+ '[' -z 's=0bf798f82dda460195fe7462d0148781;i=381;b=310437c88af546029c662c297174d398;m=a7dfc35;t=56db5c36c884b;x=cf181a6b262c9385' ']'
+ echo 's=0bf798f82dda460195fe7462d0148781;i=381;b=310437c88af546029c662c297174d398;m=a7dfc35;t=56db5c36c884b;x=cf181a6b262c9385'
+ dmesg -c
+ fixup_dev_random
+ mv /dev/random /dev/random.orig
+ mknod /dev/random c 1 9
+ kill_gpg_agent
+ pkill -9 -e gpg-agent
+ true
+ /home/gopath/src/github.com/snapcore/snapd/tests/lib/prepare-restore.sh --prepare-suite-each
+ set -e
+ set -o pipefail
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/quiet.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/boot.sh
++ GRUB_EDITENV=grub-editenv
++ case "$SPREAD_SYSTEM" in
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/dirs.sh
++ export SNAP_MOUNT_DIR=/snap
++ SNAP_MOUNT_DIR=/snap
++ export LIBEXECDIR=/usr/lib
++ LIBEXECDIR=/usr/lib
++ export MEDIA_DIR=/media
++ MEDIA_DIR=/media
++ case "$SPREAD_SYSTEM" in
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/pkgdb.sh
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/quiet.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/random.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/spread-funcs.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/journalctl.sh
++ JOURNALCTL_CURSOR_FILE=/home/gopath/src/github.com/snapcore/snapd/journalctl_cursor
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/state.sh
++ SNAPD_STATE_PATH=/home/gopath/src/github.com/snapcore/snapd/tests/snapd-state
++ SNAPD_STATE_FILE=/home/gopath/src/github.com/snapcore/snapd/tests/snapd-state.tar
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/dirs.sh
+++ export SNAP_MOUNT_DIR=/snap
+++ SNAP_MOUNT_DIR=/snap
+++ export LIBEXECDIR=/usr/lib
+++ LIBEXECDIR=/usr/lib
+++ export MEDIA_DIR=/media
+++ MEDIA_DIR=/media
+++ case "$SPREAD_SYSTEM" in
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/boot.sh
+++ GRUB_EDITENV=grub-editenv
+++ case "$SPREAD_SYSTEM" in
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/systems.sh
+ case "$1" in
+ prepare_suite_each
+ /home/gopath/src/github.com/snapcore/snapd/tests/lib/reset.sh --reuse-core
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/dirs.sh
++ export SNAP_MOUNT_DIR=/snap
++ SNAP_MOUNT_DIR=/snap
++ export LIBEXECDIR=/usr/lib
++ LIBEXECDIR=/usr/lib
++ export MEDIA_DIR=/media
++ MEDIA_DIR=/media
++ case "$SPREAD_SYSTEM" in
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/state.sh
++ SNAPD_STATE_PATH=/home/gopath/src/github.com/snapcore/snapd/tests/snapd-state
++ SNAPD_STATE_FILE=/home/gopath/src/github.com/snapcore/snapd/tests/snapd-state.tar
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/dirs.sh
+++ export SNAP_MOUNT_DIR=/snap
+++ SNAP_MOUNT_DIR=/snap
+++ export LIBEXECDIR=/usr/lib
+++ LIBEXECDIR=/usr/lib
+++ export MEDIA_DIR=/media
+++ MEDIA_DIR=/media
+++ case "$SPREAD_SYSTEM" in
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/boot.sh
+++ GRUB_EDITENV=grub-editenv
+++ case "$SPREAD_SYSTEM" in
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/systems.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/systemd.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/systems.sh
+ is_core_system
+ [[ ubuntu-core-16-arm-32 == ubuntu-core-16-* ]]
+ return 0
+ reset_all_snap --reuse-core
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/names.sh
+++ snap list
+++ grep 'gadget$'
+++ awk '{ print $1 }'
++ gadget_name=cm3
+++ snap list
+++ grep 'kernel$'
+++ awk '{ print $1 }'
++ kernel_name=pi2-kernel
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=README
+ case "$snap" in
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=bin
+ case "$snap" in
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=cm3
+ case "$snap" in
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=core
+ case "$snap" in
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=manifest.yaml
+ case "$snap" in
+ systemctl status snapd.service snapd.socket
 snapd.service - Snappy daemon
   Loaded: loaded (/lib/systemd/system/snapd.service; enabled; vendor preset: enabled)
  Drop-In: /etc/systemd/system/snapd.service.d
           local.conf
   Active: active (running) since Sun 2018-06-03 05:04:51 UTC; 27s ago
 Main PID: 2167 (snapd)
   CGroup: /system.slice/snapd.service
           2167 /usr/lib/snapd/snapd

Jun 03 05:05:09 localhost.localdomain snapd[2167]: 2018/06/03 05:05:09.516226 taskrunner.go:403: DEBUG: Running task 148 on Do: Run hook prepare-slot-broadcom-asic-control of snap "core"
Jun 03 05:05:09 localhost.localdomain snapd[2167]: 2018/06/03 05:05:09.679584 taskrunner.go:403: DEBUG: Running task 146 on Do: Connect test-snapd-broadcom-asic-control:broadcom-asic-control to core:broadcom-asic-control
Jun 03 05:05:13 localhost.localdomain snapd[2167]: 2018/06/03 05:05:13.215570 taskrunner.go:403: DEBUG: Running task 149 on Do: Run hook connect-slot-broadcom-asic-control of snap "core"
Jun 03 05:05:13 localhost.localdomain snapd[2167]: 2018/06/03 05:05:13.429720 taskrunner.go:403: DEBUG: Running task 150 on Do: Run hook connect-plug-broadcom-asic-control of snap "test-snapd-broadcom-asic-control"
Jun 03 05:05:15 localhost.localdomain snapd[2167]: 2018/06/03 05:05:15.459953 daemon.go:272: DEBUG: pid=2512;uid=0;socket=/run/snapd.socket;@ GET /v2/system-info 3.848945ms 200
Jun 03 05:05:15 localhost.localdomain snapd[2167]: 2018/06/03 05:05:15.623721 daemon.go:272: DEBUG: pid=2518;uid=0;socket=/run/snapd.socket;@ POST /v2/interfaces 67.393893ms 202
Jun 03 05:05:15 localhost.localdomain snapd[2167]: 2018/06/03 05:05:15.712565 taskrunner.go:403: DEBUG: Running task 151 on Do: Disconnect test-snapd-broadcom-asic-control:broadcom-asic-control from core:broadcom-asic-control
Jun 03 05:05:16 localhost.localdomain snapd[2167]: 2018/06/03 05:05:16.866770 cmd.go:133: DEBUG: exe doesn't have snap mount dir prefix: "/usr/lib/snapd/snapd" vs "/snap"
Jun 03 05:05:19 localhost.localdomain snapd[2167]: 2018/06/03 05:05:19.174210 daemon.go:272: DEBUG: pid=2620;uid=0;socket=/run/snapd.socket;@ GET /v2/snaps 22.691267ms 200
Jun 03 05:05:19 localhost.localdomain snapd[2167]: 2018/06/03 05:05:19.300717 daemon.go:272: DEBUG: pid=2629;uid=0;socket=/run/snapd.socket;@ GET /v2/snaps 21.410185ms 200

 snapd.socket - Socket activation for snappy daemon
   Loaded: loaded (/lib/systemd/system/snapd.socket; enabled; vendor preset: enabled)
  Drop-In: /etc/systemd/system/snapd.socket.d
           local.conf
   Active: active (running) since Sun 2018-06-03 05:04:51 UTC; 28s ago
   Listen: /run/snapd.socket (Stream)
           /run/snapd-snap.socket (Stream)

Jun 03 05:04:51 localhost.localdomain systemd[1]: Starting Socket activation for snappy daemon.
Jun 03 05:04:51 localhost.localdomain systemd[1]: Listening on Socket activation for snappy daemon.
Jun 03 05:04:51 localhost.localdomain systemd[1]: Listening on Socket activation for snappy daemon.
+ echo ' test-snapd-rsync'
+ grep -w manifest.yaml
+ snap remove manifest.yaml
snap "manifest.yaml" is not installed
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=pi2-kernel
+ case "$snap" in
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=snapcraft.yaml
+ case "$snap" in
+ systemctl status snapd.service snapd.socket
 snapd.service - Snappy daemon
   Loaded: loaded (/lib/systemd/system/snapd.service; enabled; vendor preset: enabled)
  Drop-In: /etc/systemd/system/snapd.service.d
           local.conf
   Active: active (running) since Sun 2018-06-03 05:04:51 UTC; 27s ago
 Main PID: 2167 (snapd)
   CGroup: /system.slice/snapd.service
           2167 /usr/lib/snapd/snapd

Jun 03 05:05:09 localhost.localdomain snapd[2167]: 2018/06/03 05:05:09.679584 taskrunner.go:403: DEBUG: Running task 146 on Do: Connect test-snapd-broadcom-asic-control:broadcom-asic-control to core:broadcom-asic-control
Jun 03 05:05:13 localhost.localdomain snapd[2167]: 2018/06/03 05:05:13.215570 taskrunner.go:403: DEBUG: Running task 149 on Do: Run hook connect-slot-broadcom-asic-control of snap "core"
Jun 03 05:05:13 localhost.localdomain snapd[2167]: 2018/06/03 05:05:13.429720 taskrunner.go:403: DEBUG: Running task 150 on Do: Run hook connect-plug-broadcom-asic-control of snap "test-snapd-broadcom-asic-control"
Jun 03 05:05:15 localhost.localdomain snapd[2167]: 2018/06/03 05:05:15.459953 daemon.go:272: DEBUG: pid=2512;uid=0;socket=/run/snapd.socket;@ GET /v2/system-info 3.848945ms 200
Jun 03 05:05:15 localhost.localdomain snapd[2167]: 2018/06/03 05:05:15.623721 daemon.go:272: DEBUG: pid=2518;uid=0;socket=/run/snapd.socket;@ POST /v2/interfaces 67.393893ms 202
Jun 03 05:05:15 localhost.localdomain snapd[2167]: 2018/06/03 05:05:15.712565 taskrunner.go:403: DEBUG: Running task 151 on Do: Disconnect test-snapd-broadcom-asic-control:broadcom-asic-control from core:broadcom-asic-control
Jun 03 05:05:16 localhost.localdomain snapd[2167]: 2018/06/03 05:05:16.866770 cmd.go:133: DEBUG: exe doesn't have snap mount dir prefix: "/usr/lib/snapd/snapd" vs "/snap"
Jun 03 05:05:19 localhost.localdomain snapd[2167]: 2018/06/03 05:05:19.174210 daemon.go:272: DEBUG: pid=2620;uid=0;socket=/run/snapd.socket;@ GET /v2/snaps 22.691267ms 200
Jun 03 05:05:19 localhost.localdomain snapd[2167]: 2018/06/03 05:05:19.300717 daemon.go:272: DEBUG: pid=2629;uid=0;socket=/run/snapd.socket;@ GET /v2/snaps 21.410185ms 200
Jun 03 05:05:19 localhost.localdomain snapd[2167]: 2018/06/03 05:05:19.466350 daemon.go:272: DEBUG: pid=2640;uid=0;socket=/run/snapd.socket;@ POST /v2/snaps/manifest.yaml 1.640066ms 400

 snapd.socket - Socket activation for snappy daemon
   Loaded: loaded (/lib/systemd/system/snapd.socket; enabled; vendor preset: enabled)
  Drop-In: /etc/systemd/system/snapd.socket.d
           local.conf
   Active: active (running) since Sun 2018-06-03 05:04:51 UTC; 28s ago
   Listen: /run/snapd.socket (Stream)
           /run/snapd-snap.socket (Stream)

Jun 03 05:04:51 localhost.localdomain systemd[1]: Starting Socket activation for snappy daemon.
Jun 03 05:04:51 localhost.localdomain systemd[1]: Listening on Socket activation for snappy daemon.
Jun 03 05:04:51 localhost.localdomain systemd[1]: Listening on Socket activation for snappy daemon.
+ echo ' test-snapd-rsync'
+ grep -w snapcraft.yaml
+ snap remove snapcraft.yaml
snap "snapcraft.yaml" is not installed
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=test-snapd-broadcom-asic-control
+ case "$snap" in
+ systemctl status snapd.service snapd.socket
 snapd.service - Snappy daemon
   Loaded: loaded (/lib/systemd/system/snapd.service; enabled; vendor preset: enabled)
  Drop-In: /etc/systemd/system/snapd.service.d
           local.conf
   Active: active (running) since Sun 2018-06-03 05:04:51 UTC; 28s ago
 Main PID: 2167 (snapd)
   CGroup: /system.slice/snapd.service
           2167 /usr/lib/snapd/snapd

Jun 03 05:05:13 localhost.localdomain snapd[2167]: 2018/06/03 05:05:13.215570 taskrunner.go:403: DEBUG: Running task 149 on Do: Run hook connect-slot-broadcom-asic-control of snap "core"
Jun 03 05:05:13 localhost.localdomain snapd[2167]: 2018/06/03 05:05:13.429720 taskrunner.go:403: DEBUG: Running task 150 on Do: Run hook connect-plug-broadcom-asic-control of snap "test-snapd-broadcom-asic-control"
Jun 03 05:05:15 localhost.localdomain snapd[2167]: 2018/06/03 05:05:15.459953 daemon.go:272: DEBUG: pid=2512;uid=0;socket=/run/snapd.socket;@ GET /v2/system-info 3.848945ms 200
Jun 03 05:05:15 localhost.localdomain snapd[2167]: 2018/06/03 05:05:15.623721 daemon.go:272: DEBUG: pid=2518;uid=0;socket=/run/snapd.socket;@ POST /v2/interfaces 67.393893ms 202
Jun 03 05:05:15 localhost.localdomain snapd[2167]: 2018/06/03 05:05:15.712565 taskrunner.go:403: DEBUG: Running task 151 on Do: Disconnect test-snapd-broadcom-asic-control:broadcom-asic-control from core:broadcom-asic-control
Jun 03 05:05:16 localhost.localdomain snapd[2167]: 2018/06/03 05:05:16.866770 cmd.go:133: DEBUG: exe doesn't have snap mount dir prefix: "/usr/lib/snapd/snapd" vs "/snap"
Jun 03 05:05:19 localhost.localdomain snapd[2167]: 2018/06/03 05:05:19.174210 daemon.go:272: DEBUG: pid=2620;uid=0;socket=/run/snapd.socket;@ GET /v2/snaps 22.691267ms 200
Jun 03 05:05:19 localhost.localdomain snapd[2167]: 2018/06/03 05:05:19.300717 daemon.go:272: DEBUG: pid=2629;uid=0;socket=/run/snapd.socket;@ GET /v2/snaps 21.410185ms 200
Jun 03 05:05:19 localhost.localdomain snapd[2167]: 2018/06/03 05:05:19.466350 daemon.go:272: DEBUG: pid=2640;uid=0;socket=/run/snapd.socket;@ POST /v2/snaps/manifest.yaml 1.640066ms 400
Jun 03 05:05:19 localhost.localdomain snapd[2167]: 2018/06/03 05:05:19.619781 daemon.go:272: DEBUG: pid=2649;uid=0;socket=/run/snapd.socket;@ POST /v2/snaps/snapcraft.yaml 1.22514ms 400

 snapd.socket - Socket activation for snappy daemon
   Loaded: loaded (/lib/systemd/system/snapd.socket; enabled; vendor preset: enabled)
  Drop-In: /etc/systemd/system/snapd.socket.d
           local.conf
   Active: active (running) since Sun 2018-06-03 05:04:51 UTC; 28s ago
   Listen: /run/snapd.socket (Stream)
           /run/snapd-snap.socket (Stream)

Jun 03 05:04:51 localhost.localdomain systemd[1]: Starting Socket activation for snappy daemon.
Jun 03 05:04:51 localhost.localdomain systemd[1]: Listening on Socket activation for snappy daemon.
Jun 03 05:04:51 localhost.localdomain systemd[1]: Listening on Socket activation for snappy daemon.
+ echo ' test-snapd-rsync'
+ grep -w test-snapd-broadcom-asic-control
+ snap remove test-snapd-broadcom-asic-control
2018-06-03T05:05:46Z ERROR cannot remove snap file "test-snapd-broadcom-asic-control", will retry in 3 mins: [--root / disable snap-test\x2dsnapd\x2dbroadcom\x2dasic\x2dcontrol-x1.mount] failed with exit status 1: Removed symlink /etc/systemd/system/multi-user.target.wants/snap-test\x2dsnapd\x2dbroadcom\x2dasic\x2dcontrol-x1.mount.
Failed to execute operation: Connection timed out

2018-06-03T05:09:11Z ERROR cannot remove snap file "test-snapd-broadcom-asic-control", will retry in 3 mins: [--root / disable snap-test\x2dsnapd\x2dbroadcom\x2dasic\x2dcontrol-x1.mount] failed with exit status 1: Failed to execute operation: Connection timed out

2018-06-03T05:12:37Z ERROR cannot remove snap file "test-snapd-broadcom-asic-control", will retry in 3 mins: [--root / disable snap-test\x2dsnapd\x2dbroadcom\x2dasic\x2dcontrol-x1.mount] failed with exit status 1: Failed to execute operation: Connection timed out

2018-06-03T05:16:02Z ERROR cannot remove snap file "test-snapd-broadcom-asic-control", will retry in 3 mins: [--root / disable snap-test\x2dsnapd\x2dbroadcom\x2dasic\x2dcontrol-x1.mount] failed with exit status 1: Failed to execute operation: Connection timed out

2018-06-03T05:19:27Z ERROR cannot remove snap file "test-snapd-broadcom-asic-control", will retry in 3 mins: [--root / disable snap-test\x2dsnapd\x2dbroadcom\x2dasic\x2dcontrol-x1.mount] failed with exit status 1: Failed to execute operation: Connection timed out

2018-06-03T05:22:52Z ERROR cannot remove snap file "test-snapd-broadcom-asic-control", will retry in 3 mins: [--root / disable snap-test\x2dsnapd\x2dbroadcom\x2dasic\x2dcontrol-x1.mount] failed with exit status 1: Failed to execute operation: Connection timed out


<kill-timeout reached>
-----
.
2018-06-03 05:24:30 Debug output for external:ubuntu-core-16-arm-32:tests/main/failover:rclocalcrash : 
-----
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/boot.sh
++ GRUB_EDITENV=grub-editenv
++ case "$SPREAD_SYSTEM" in
+ bootenv
+ '[' 0 -eq 0 ']'
+ command -v grub-editenv
+ fw_printenv
allargs=setenv bootargs "${args} root=${devroot}"
arch=arm
baudrate=115200
board_name=Compute Module 3
board_rev=0xA
board_rev_scheme=1
board_revision=0xA020A0
boot_a_script=load ${devtype} ${devnum}:${bootpart} ${scriptaddr} ${prefix}${script}; source ${scriptaddr}
boot_extlinux=sysboot ${devtype} ${devnum}:${bootpart} any ${scriptaddr} ${prefix}extlinux/extlinux.conf
boot_prefixes=/ /boot/
boot_script_dhcp=boot.scr.uimg
boot_scripts=boot.scr.uimg boot.scr
boot_targets=mmc usb pxe dhcp 
bootcmd=run distro_bootcmd
bootcmd_dhcp=usb start; if dhcp ${scriptaddr} ${boot_script_dhcp}; then source ${scriptaddr}; fi
bootcmd_mmc=setenv devnum 0; run dev_boot
bootcmd_pxe=usb start; dhcp; if pxe get; then pxe boot; fi
bootcmd_usb=setenv devnum 0; usb start; run dev_boot
bootdelay=2
bootenv=uEnv.txt
cpu=armv7
dev_boot=if ${target} dev ${devnum}; then setenv devtype ${target}; if run loadbootenv; then echo Loaded environment from ${bootenv}; run importbootenv; fi; if test -n "$uenvcmd"; then echo Running uenvcmd ...; run uenvcmd; fi; run scan_dev_for_boot_part; fi
devnum=0
devnumber=0
devtype=mmc
dhcpuboot=usb start; dhcp u-boot.uimg; bootm
distro_bootcmd=for target in ${boot_targets}; do run bootcmd_${target}; done
fdt_addr=2000000
fdt_addr_r=0x00000100
fdtaddr=0x02000000
fdtcontroladdr=3af8c230
fdtfile=bcm2709-rpi-2-b.dtb
filesize=1c5
importbootenv=echo Importing environment from ${target} ...; env import -t -r $loadaddr $filesize
initrd_addr=0x02100000
initrd_file=initrd.img
kernel_addr_r=0x01000000
kernel_file=kernel.img
loadaddr=0x00200000
loadbootenv=echo LOADBOOTENV; load ${devtype} ${devnum} ${loadaddr} ${bootenv}
loadfdt=fdt addr 0x02000000; fdt get value args /chosen bootargs
loadfiles=run loadkernel; run loadinitrd; run loadfdt
loadinitrd=load ${target} ${devnumber}:${partition} ${initrd_addr} ${snap_kernel}/${initrd_file}; setenv initrd_size ${filesize}
loadkernel=load ${target} ${devnumber}:${partition} ${loadaddr} ${snap_kernel}/${kernel_file}
mmcrootfstype=ext4
partition=1
pxefile_addr_r=0x00100000
ramdisk_addr_r=0x02100000
scan_dev_for_boot=echo Scanning ${devtype} ${devnum}:${bootpart}...; for prefix in ${boot_prefixes}; do run scan_dev_for_extlinux; run scan_dev_for_scripts; done
scan_dev_for_boot_part=part list ${devtype} ${devnum} devplist; for bootpart in ${devplist}; do if fstype ${devtype} ${devnum}:${bootpart} bootfstype; then run scan_dev_for_boot; fi; done
scan_dev_for_extlinux=if test -e ${devtype} ${devnum}:${bootpart} ${prefix}extlinux/extlinux.conf; then echo Found ${prefix}extlinux/extlinux.conf; run boot_extlinux; echo SCRIPT FAILED: continuing...; fi
scan_dev_for_scripts=for script in ${boot_scripts}; do if test -e ${devtype} ${devnum}:${bootpart} ${prefix}${script}; then echo Found U-Boot script ${prefix}${script}; run boot_a_script; echo SCRIPT FAILED: continuing...; fi; done
scriptaddr=0x00000000
serial#=000000003c5f75b9
snap_core=core_4797.snap
snap_kernel=pi2-kernel_54.snap
snappy_boot=if test "${snap_mode}" = "try"; then setenv snap_mode "trying"; saveenv; if test "${snap_try_core}" != ""; then setenv snap_core "${snap_try_core}"; fi; if test "${snap_try_kernel}" != ""; then setenv snap_kernel "${snap_try_kernel}"; fi; elif test "${snap_mode}" = "trying"; then setenv snap_mode ""; saveenv; fi; run loadfiles; setenv devroot "/dev/disk/by-label/writable ${snappy_cmdline} snap_core=${snap_core} snap_kernel=${snap_kernel}"; run allargs; bootz ${loadaddr} ${initrd_addr}:${initrd_size} 0x02000000
snappy_cmdline=net.ifnames=0 init=/lib/systemd/systemd ro panic=-1 fixrtc
soc=bcm2835
stderr=serial,lcd
stdin=serial,usbkbd
stdout=serial,lcd
uenvcmd=echo ENVCMD; run snappy_boot
vendor=raspberrypi
+ snap list
Name                              Version                     Rev   Tracking  Developer  Notes
cm3                               16.04-0.5                   1     stable    canonical  gadget
core                              16-2.33~rc1+git771.c4fa958  4797  edge      canonical  core
pi2-kernel                        4.4.0-1090.98               54    stable    canonical  kernel
test-snapd-broadcom-asic-control                              x1    -         -          disabled,broken
test-snapd-rsync                  3.1.3                       10    stable    cachio     devmode
+ snap changes
ID   Status  Spawn               Ready               Summary
1    Done    today at 04:48 UTC  today at 04:48 UTC  Initialize system state
2    Done    today at 04:48 UTC  today at 04:49 UTC  Initialize device
5    Done    today at 04:48 UTC  today at 05:02 UTC  Install "jq" snap
3    Done    today at 04:48 UTC  today at 04:48 UTC  Refresh "core" snap from "edge" channel
4    Done    today at 04:49 UTC  today at 04:52 UTC  Auto-refresh snap "pi2-kernel"
6    Done    today at 05:02 UTC  today at 05:02 UTC  Remove "jq" snap
7    Done    today at 05:03 UTC  today at 05:03 UTC  Install "test-snapd-rsync" snap
8    Done    today at 05:03 UTC  today at 05:03 UTC  Setup alias "rsync" => "rsync" for snap "test-snapd-rsync"
9    Done    today at 05:03 UTC  today at 05:03 UTC  Install "jq" snap
10   Done    today at 05:03 UTC  today at 05:03 UTC  Change configuration of "core" snap
11   Done    today at 05:03 UTC  today at 05:03 UTC  Remove "jq" snap
12   Done    today at 05:04 UTC  today at 05:05 UTC  Install "test-snapd-broadcom-asic-control" snap from file "/home/gopath/src/github.com/snapcore/snapd/tests/lib/snaps/test-snapd-broadcom-asic-control/test-snapd-broadcom-asic-control_1.0_all.snap"
13   Done    today at 05:05 UTC  today at 05:05 UTC  Connect test-snapd-broadcom-asic-control:broadcom-asic-control to core:broadcom-asic-control
14   Done    today at 05:05 UTC  today at 05:05 UTC  Disconnect : from test-snapd-broadcom-asic-control:broadcom-asic-control
15   Doing   today at 05:05 UTC  -                   Remove "test-snapd-broadcom-asic-control" snap

+ '[' 1 = 1 ']'
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/journalctl.sh
++ JOURNALCTL_CURSOR_FILE=/home/gopath/src/github.com/snapcore/snapd/journalctl_cursor
+ echo '# journal messages for snapd'
# journal messages for snapd
+ get_journalctl_log -u snapd
++ cat /home/gopath/src/github.com/snapcore/snapd/journalctl_cursor
+ cursor='s=0bf798f82dda460195fe7462d0148781;i=381;b=310437c88af546029c662c297174d398;m=a7dfc35;t=56db5c36c884b;x=cf181a6b262c9385'
+ get_journalctl_log_from_cursor 's=0bf798f82dda460195fe7462d0148781;i=381;b=310437c88af546029c662c297174d398;m=a7dfc35;t=56db5c36c884b;x=cf181a6b262c9385' -u snapd
+ cursor='s=0bf798f82dda460195fe7462d0148781;i=381;b=310437c88af546029c662c297174d398;m=a7dfc35;t=56db5c36c884b;x=cf181a6b262c9385'
+ shift
+ journalctl -u snapd --cursor 's=0bf798f82dda460195fe7462d0148781;i=381;b=310437c88af546029c662c297174d398;m=a7dfc35;t=56db5c36c884b;x=cf181a6b262c9385'
-- Logs begin at Sun 2018-06-03 04:48:23 UTC, end at Sun 2018-06-03 05:25:18 UTC. --
Jun 03 05:05:19 localhost.localdomain snapd[2167]: 2018/06/03 05:05:19.174210 daemon.go:272: DEBUG: pid=2620;uid=0;socket=/run/snapd.socket;@ GET /v2/snaps 22.691267ms 200
Jun 03 05:05:19 localhost.localdomain snapd[2167]: 2018/06/03 05:05:19.300717 daemon.go:272: DEBUG: pid=2629;uid=0;socket=/run/snapd.socket;@ GET /v2/snaps 21.410185ms 200
Jun 03 05:05:19 localhost.localdomain snapd[2167]: 2018/06/03 05:05:19.466350 daemon.go:272: DEBUG: pid=2640;uid=0;socket=/run/snapd.socket;@ POST /v2/snaps/manifest.yaml 1.640066ms 400
Jun 03 05:05:19 localhost.localdomain snapd[2167]: 2018/06/03 05:05:19.619781 daemon.go:272: DEBUG: pid=2649;uid=0;socket=/run/snapd.socket;@ POST /v2/snaps/snapcraft.yaml 1.22514ms 400
Jun 03 05:05:19 localhost.localdomain snapd[2167]: 2018/06/03 05:05:19.859299 daemon.go:272: DEBUG: pid=2658;uid=0;socket=/run/snapd.socket;@ POST /v2/snaps/test-snapd-broadcom-asic-control 88.280514ms 202
Jun 03 05:05:19 localhost.localdomain snapd[2167]: 2018/06/03 05:05:19.869828 taskrunner.go:403: DEBUG: Running task 153 on Do: Stop snap "test-snapd-broadcom-asic-control" services
Jun 03 05:05:20 localhost.localdomain snapd[2167]: 2018/06/03 05:05:20.074899 taskrunner.go:403: DEBUG: Running task 152 on Do: Run remove hook of "test-snapd-broadcom-asic-control" snap if present
Jun 03 05:05:20 localhost.localdomain snapd[2167]: 2018/06/03 05:05:20.235130 taskrunner.go:403: DEBUG: Running task 154 on Do: Remove aliases for snap "test-snapd-broadcom-asic-control"
Jun 03 05:05:20 localhost.localdomain snapd[2167]: 2018/06/03 05:05:20.473152 taskrunner.go:403: DEBUG: Running task 155 on Do: Make snap "test-snapd-broadcom-asic-control" unavailable to the system
Jun 03 05:05:20 localhost.localdomain snapd[2167]: 2018/06/03 05:05:20.704965 taskrunner.go:403: DEBUG: Running task 156 on Do: Remove security profile for snap "test-snapd-broadcom-asic-control" (x1)
Jun 03 05:05:20 localhost.localdomain snapd[2167]: 2018/06/03 05:05:20.877097 taskrunner.go:403: DEBUG: Running task 157 on Do: Remove data for snap "test-snapd-broadcom-asic-control" (x1)
Jun 03 05:05:21 localhost.localdomain snapd[2167]: 2018/06/03 05:05:21.035488 taskrunner.go:403: DEBUG: Running task 158 on Do: Remove snap "test-snapd-broadcom-asic-control" (x1) from the system
Jun 03 05:05:46 localhost.localdomain snapd[2167]: 2018/06/03 05:05:46.629067 task.go:303: DEBUG: 2018-06-03T05:05:46Z ERROR cannot remove snap file "test-snapd-broadcom-asic-control", will retry in 3 mins: [--root / disable snap-test\x2dsnapd\x2dbroadcom\x2dasic\x2dcontrol-x1.mount] failed with exit status 1: Removed symlink /etc/systemd/system/multi-user.target.wants/snap-test\x2dsnapd\x2dbroadcom\x2dasic\x2dcontrol-x1.mount.
Jun 03 05:05:46 localhost.localdomain snapd[2167]: Failed to execute operation: Connection timed out
Jun 03 05:08:46 localhost.localdomain snapd[2167]: 2018/06/03 05:08:46.704606 taskrunner.go:403: DEBUG: Running task 158 on Doing: Remove snap "test-snapd-broadcom-asic-control" (x1) from the system
Jun 03 05:09:11 localhost.localdomain snapd[2167]: 2018/06/03 05:09:11.838803 task.go:303: DEBUG: 2018-06-03T05:09:11Z ERROR cannot remove snap file "test-snapd-broadcom-asic-control", will retry in 3 mins: [--root / disable snap-test\x2dsnapd\x2dbroadcom\x2dasic\x2dcontrol-x1.mount] failed with exit status 1: Failed to execute operation: Connection timed out
Jun 03 05:12:11 localhost.localdomain snapd[2167]: 2018/06/03 05:12:11.913882 taskrunner.go:403: DEBUG: Running task 158 on Doing: Remove snap "test-snapd-broadcom-asic-control" (x1) from the system
Jun 03 05:12:37 localhost.localdomain snapd[2167]: 2018/06/03 05:12:37.020415 task.go:303: DEBUG: 2018-06-03T05:12:37Z ERROR cannot remove snap file "test-snapd-broadcom-asic-control", will retry in 3 mins: [--root / disable snap-test\x2dsnapd\x2dbroadcom\x2dasic\x2dcontrol-x1.mount] failed with exit status 1: Failed to execute operation: Connection timed out
Jun 03 05:15:37 localhost.localdomain snapd[2167]: 2018/06/03 05:15:37.096688 taskrunner.go:403: DEBUG: Running task 158 on Doing: Remove snap "test-snapd-broadcom-asic-control" (x1) from the system
Jun 03 05:16:02 localhost.localdomain snapd[2167]: 2018/06/03 05:16:02.219034 task.go:303: DEBUG: 2018-06-03T05:16:02Z ERROR cannot remove snap file "test-snapd-broadcom-asic-control", will retry in 3 mins: [--root / disable snap-test\x2dsnapd\x2dbroadcom\x2dasic\x2dcontrol-x1.mount] failed with exit status 1: Failed to execute operation: Connection timed out
Jun 03 05:19:02 localhost.localdomain snapd[2167]: 2018/06/03 05:19:02.304885 taskrunner.go:403: DEBUG: Running task 158 on Doing: Remove snap "test-snapd-broadcom-asic-control" (x1) from the system
Jun 03 05:19:27 localhost.localdomain snapd[2167]: 2018/06/03 05:19:27.416674 task.go:303: DEBUG: 2018-06-03T05:19:27Z ERROR cannot remove snap file "test-snapd-broadcom-asic-control", will retry in 3 mins: [--root / disable snap-test\x2dsnapd\x2dbroadcom\x2dasic\x2dcontrol-x1.mount] failed with exit status 1: Failed to execute operation: Connection timed out
Jun 03 05:22:27 localhost.localdomain snapd[2167]: 2018/06/03 05:22:27.503221 taskrunner.go:403: DEBUG: Running task 158 on Doing: Remove snap "test-snapd-broadcom-asic-control" (x1) from the system
Jun 03 05:22:52 localhost.localdomain snapd[2167]: 2018/06/03 05:22:52.624540 task.go:303: DEBUG: 2018-06-03T05:22:52Z ERROR cannot remove snap file "test-snapd-broadcom-asic-control", will retry in 3 mins: [--root / disable snap-test\x2dsnapd\x2dbroadcom\x2dasic\x2dcontrol-x1.mount] failed with exit status 1: Failed to execute operation: Connection timed out
Jun 03 05:25:17 localhost.localdomain snapd[2167]: 2018/06/03 05:25:17.916464 snapmgr.go:228: cannot read snap info of snap "test-snapd-broadcom-asic-control" at revision x1: cannot find installed snap "test-snapd-broadcom-asic-control" at revision x1: missing file /snap/test-snapd-broadcom-asic-control/x1/meta/snap.yaml
Jun 03 05:25:17 localhost.localdomain snapd[2167]: 2018/06/03 05:25:17.936189 daemon.go:272: DEBUG: pid=2728;uid=0;socket=/run/snapd.socket;@ GET /v2/snaps 21.495818ms 200
Jun 03 05:25:18 localhost.localdomain snapd[2167]: 2018/06/03 05:25:18.051917 daemon.go:272: DEBUG: pid=2734;uid=0;socket=/run/snapd.socket;@ GET /v2/changes?select=all 19.27967ms 200
+ echo '# apparmor denials '
# apparmor denials 
+ dmesg --ctime
+ grep DENIED
+ true
+ echo '# seccomp denials (kills) '
# seccomp denials (kills) 
+ dmesg --ctime
+ grep type=1326
+ true
+ echo '# snap interfaces'
# snap interfaces
+ snap interfaces
Slot                      Plug
cm3:bcm-gpio-0            -
cm3:bcm-gpio-1            -
cm3:bcm-gpio-10           -
cm3:bcm-gpio-11           -
cm3:bcm-gpio-12           -
cm3:bcm-gpio-13           -
cm3:bcm-gpio-14           -
cm3:bcm-gpio-15           -
cm3:bcm-gpio-16           -
cm3:bcm-gpio-17           -
cm3:bcm-gpio-18           -
cm3:bcm-gpio-19           -
cm3:bcm-gpio-2            -
cm3:bcm-gpio-20           -
cm3:bcm-gpio-21           -
cm3:bcm-gpio-22           -
cm3:bcm-gpio-23           -
cm3:bcm-gpio-24           -
cm3:bcm-gpio-25           -
cm3:bcm-gpio-26           -
cm3:bcm-gpio-27           -
cm3:bcm-gpio-3            -
cm3:bcm-gpio-4            -
cm3:bcm-gpio-5            -
cm3:bcm-gpio-6            -
cm3:bcm-gpio-7            -
cm3:bcm-gpio-8            -
cm3:bcm-gpio-9            -
cm3:bt-serial             -
cm3:i2c-0                 -
cm3:i2c-1                 -
cm3:i2c-2                 -
:account-control          -
:alsa                     -
:autopilot-introspection  -
:bluetooth-control        -
:broadcom-asic-control    -
:browser-support          -
:camera                   -
:classic-support          -
:core-support             core:core-support-plug
:daemon-notify            -
:dcdbas-control           -
:docker-support           -
:firewall-control         -
:framebuffer              -
:fuse-support             -
:gpg-keys                 -
:gpg-public-keys          -
:gpio-memory-control      -
:greengrass-support       -
:hardware-observe         -
:hardware-random-control  -
:hardware-random-observe  -
:home                     -
:hostname-control         -
:io-ports-control         -
:joystick                 -
:kernel-module-control    -
:kubernetes-support       -
:kvm                      -
:log-observe              -
:lxd-support              -
:mount-observe            -
:netlink-audit            -
:netlink-connector        -
:network                  -
:network-bind             -
:network-control          -
:network-observe          -
:network-setup-control    -
:network-setup-observe    -
:opengl                   -
:openvswitch-support      -
:physical-memory-control  -
:physical-memory-observe  -
:ppp                      -
:process-control          -
:raw-usb                  -
:removable-media          -
:shutdown                 -
:snapd-control            -
:ssh-keys                 -
:ssh-public-keys          -
:system-observe           -
:system-trace             -
:time-control             -
:timeserver-control       -
:timezone-control         -
:tpm                      -
:uhid                     -
-----
.
2018-06-03 05:24:30 Restoring external:ubuntu-core-16-arm-32:tests/main/failover:rclocalcrash...
2018-06-03 05:24:30 Preparing external:ubuntu-core-16-arm-32:tests/main/failover:emptysystemd...
2018-06-03 05:25:21 Error preparing external:ubuntu-core-16-arm-32:tests/main/failover:emptysystemd : 
-----
+ /home/gopath/src/github.com/snapcore/snapd/tests/lib/prepare-restore.sh --prepare-project-each
+ set -e
+ set -o pipefail
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/quiet.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/boot.sh
++ GRUB_EDITENV=grub-editenv
++ case "$SPREAD_SYSTEM" in
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/dirs.sh
++ export SNAP_MOUNT_DIR=/snap
++ SNAP_MOUNT_DIR=/snap
++ export LIBEXECDIR=/usr/lib
++ LIBEXECDIR=/usr/lib
++ export MEDIA_DIR=/media
++ MEDIA_DIR=/media
++ case "$SPREAD_SYSTEM" in
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/pkgdb.sh
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/quiet.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/random.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/spread-funcs.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/journalctl.sh
++ JOURNALCTL_CURSOR_FILE=/home/gopath/src/github.com/snapcore/snapd/journalctl_cursor
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/state.sh
++ SNAPD_STATE_PATH=/home/gopath/src/github.com/snapcore/snapd/tests/snapd-state
++ SNAPD_STATE_FILE=/home/gopath/src/github.com/snapcore/snapd/tests/snapd-state.tar
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/dirs.sh
+++ export SNAP_MOUNT_DIR=/snap
+++ SNAP_MOUNT_DIR=/snap
+++ export LIBEXECDIR=/usr/lib
+++ LIBEXECDIR=/usr/lib
+++ export MEDIA_DIR=/media
+++ MEDIA_DIR=/media
+++ case "$SPREAD_SYSTEM" in
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/boot.sh
+++ GRUB_EDITENV=grub-editenv
+++ case "$SPREAD_SYSTEM" in
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/systems.sh
+ case "$1" in
+ prepare_project_each
+ start_new_journalctl_log
++ get_last_journalctl_cursor
++ journalctl --output=export -n1
++ grep --binary-files=text -o '__CURSOR=.*'
++ sed -e 's/^__CURSOR=//'
+ cursor='s=0bf798f82dda460195fe7462d0148781;i=3e4;b=310437c88af546029c662c297174d398;m=52719027;t=56db60b601c40;x=835c0b3529d9ed60'
+ '[' -z 's=0bf798f82dda460195fe7462d0148781;i=3e4;b=310437c88af546029c662c297174d398;m=52719027;t=56db60b601c40;x=835c0b3529d9ed60' ']'
+ echo 's=0bf798f82dda460195fe7462d0148781;i=3e4;b=310437c88af546029c662c297174d398;m=52719027;t=56db60b601c40;x=835c0b3529d9ed60'
+ dmesg -c
+ fixup_dev_random
+ mv /dev/random /dev/random.orig
+ mknod /dev/random c 1 9
+ kill_gpg_agent
+ pkill -9 -e gpg-agent
+ true
+ /home/gopath/src/github.com/snapcore/snapd/tests/lib/prepare-restore.sh --prepare-suite-each
+ set -e
+ set -o pipefail
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/quiet.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/boot.sh
++ GRUB_EDITENV=grub-editenv
++ case "$SPREAD_SYSTEM" in
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/dirs.sh
++ export SNAP_MOUNT_DIR=/snap
++ SNAP_MOUNT_DIR=/snap
++ export LIBEXECDIR=/usr/lib
++ LIBEXECDIR=/usr/lib
++ export MEDIA_DIR=/media
++ MEDIA_DIR=/media
++ case "$SPREAD_SYSTEM" in
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/pkgdb.sh
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/quiet.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/random.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/spread-funcs.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/journalctl.sh
++ JOURNALCTL_CURSOR_FILE=/home/gopath/src/github.com/snapcore/snapd/journalctl_cursor
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/state.sh
++ SNAPD_STATE_PATH=/home/gopath/src/github.com/snapcore/snapd/tests/snapd-state
++ SNAPD_STATE_FILE=/home/gopath/src/github.com/snapcore/snapd/tests/snapd-state.tar
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/dirs.sh
+++ export SNAP_MOUNT_DIR=/snap
+++ SNAP_MOUNT_DIR=/snap
+++ export LIBEXECDIR=/usr/lib
+++ LIBEXECDIR=/usr/lib
+++ export MEDIA_DIR=/media
+++ MEDIA_DIR=/media
+++ case "$SPREAD_SYSTEM" in
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/boot.sh
+++ GRUB_EDITENV=grub-editenv
+++ case "$SPREAD_SYSTEM" in
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/systems.sh
+ case "$1" in
+ prepare_suite_each
+ /home/gopath/src/github.com/snapcore/snapd/tests/lib/reset.sh --reuse-core
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/dirs.sh
++ export SNAP_MOUNT_DIR=/snap
++ SNAP_MOUNT_DIR=/snap
++ export LIBEXECDIR=/usr/lib
++ LIBEXECDIR=/usr/lib
++ export MEDIA_DIR=/media
++ MEDIA_DIR=/media
++ case "$SPREAD_SYSTEM" in
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/state.sh
++ SNAPD_STATE_PATH=/home/gopath/src/github.com/snapcore/snapd/tests/snapd-state
++ SNAPD_STATE_FILE=/home/gopath/src/github.com/snapcore/snapd/tests/snapd-state.tar
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/dirs.sh
+++ export SNAP_MOUNT_DIR=/snap
+++ SNAP_MOUNT_DIR=/snap
+++ export LIBEXECDIR=/usr/lib
+++ LIBEXECDIR=/usr/lib
+++ export MEDIA_DIR=/media
+++ MEDIA_DIR=/media
+++ case "$SPREAD_SYSTEM" in
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/boot.sh
+++ GRUB_EDITENV=grub-editenv
+++ case "$SPREAD_SYSTEM" in
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/systems.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/systemd.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/systems.sh
+ is_core_system
+ [[ ubuntu-core-16-arm-32 == ubuntu-core-16-* ]]
+ return 0
+ reset_all_snap --reuse-core
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/names.sh
+++ snap list
+++ grep 'gadget$'
+++ awk '{ print $1 }'
++ gadget_name=cm3
+++ snap list
+++ grep 'kernel$'
+++ awk '{ print $1 }'
++ kernel_name=pi2-kernel
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=README
+ case "$snap" in
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=bin
+ case "$snap" in
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=cm3
+ case "$snap" in
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=core
+ case "$snap" in
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=manifest.yaml
+ case "$snap" in
+ systemctl status snapd.service snapd.socket
Failed to get properties: Connection timed out
+ systemctl start snapd.service snapd.socket
Failed to start snapd.service: Connection timed out
See system logs and 'systemctl status snapd.service' for details.
Failed to start snapd.socket: Connection timed out
See system logs and 'systemctl status snapd.socket' for details.
-----
.
2018-06-03 05:25:30 Debug output for external:ubuntu-core-16-arm-32:tests/main/failover:emptysystemd : 
-----
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/boot.sh
++ GRUB_EDITENV=grub-editenv
++ case "$SPREAD_SYSTEM" in
+ bootenv
+ '[' 0 -eq 0 ']'
+ command -v grub-editenv
+ fw_printenv
allargs=setenv bootargs "${args} root=${devroot}"
arch=arm
baudrate=115200
board_name=Compute Module 3
board_rev=0xA
board_rev_scheme=1
board_revision=0xA020A0
boot_a_script=load ${devtype} ${devnum}:${bootpart} ${scriptaddr} ${prefix}${script}; source ${scriptaddr}
boot_extlinux=sysboot ${devtype} ${devnum}:${bootpart} any ${scriptaddr} ${prefix}extlinux/extlinux.conf
boot_prefixes=/ /boot/
boot_script_dhcp=boot.scr.uimg
boot_scripts=boot.scr.uimg boot.scr
boot_targets=mmc usb pxe dhcp 
bootcmd=run distro_bootcmd
bootcmd_dhcp=usb start; if dhcp ${scriptaddr} ${boot_script_dhcp}; then source ${scriptaddr}; fi
bootcmd_mmc=setenv devnum 0; run dev_boot
bootcmd_pxe=usb start; dhcp; if pxe get; then pxe boot; fi
bootcmd_usb=setenv devnum 0; usb start; run dev_boot
bootdelay=2
bootenv=uEnv.txt
cpu=armv7
dev_boot=if ${target} dev ${devnum}; then setenv devtype ${target}; if run loadbootenv; then echo Loaded environment from ${bootenv}; run importbootenv; fi; if test -n "$uenvcmd"; then echo Running uenvcmd ...; run uenvcmd; fi; run scan_dev_for_boot_part; fi
devnum=0
devnumber=0
devtype=mmc
dhcpuboot=usb start; dhcp u-boot.uimg; bootm
distro_bootcmd=for target in ${boot_targets}; do run bootcmd_${target}; done
fdt_addr=2000000
fdt_addr_r=0x00000100
fdtaddr=0x02000000
fdtcontroladdr=3af8c230
fdtfile=bcm2709-rpi-2-b.dtb
filesize=1c5
importbootenv=echo Importing environment from ${target} ...; env import -t -r $loadaddr $filesize
initrd_addr=0x02100000
initrd_file=initrd.img
kernel_addr_r=0x01000000
kernel_file=kernel.img
loadaddr=0x00200000
loadbootenv=echo LOADBOOTENV; load ${devtype} ${devnum} ${loadaddr} ${bootenv}
loadfdt=fdt addr 0x02000000; fdt get value args /chosen bootargs
loadfiles=run loadkernel; run loadinitrd; run loadfdt
loadinitrd=load ${target} ${devnumber}:${partition} ${initrd_addr} ${snap_kernel}/${initrd_file}; setenv initrd_size ${filesize}
loadkernel=load ${target} ${devnumber}:${partition} ${loadaddr} ${snap_kernel}/${kernel_file}
mmcrootfstype=ext4
partition=1
pxefile_addr_r=0x00100000
ramdisk_addr_r=0x02100000
scan_dev_for_boot=echo Scanning ${devtype} ${devnum}:${bootpart}...; for prefix in ${boot_prefixes}; do run scan_dev_for_extlinux; run scan_dev_for_scripts; done
scan_dev_for_boot_part=part list ${devtype} ${devnum} devplist; for bootpart in ${devplist}; do if fstype ${devtype} ${devnum}:${bootpart} bootfstype; then run scan_dev_for_boot; fi; done
scan_dev_for_extlinux=if test -e ${devtype} ${devnum}:${bootpart} ${prefix}extlinux/extlinux.conf; then echo Found ${prefix}extlinux/extlinux.conf; run boot_extlinux; echo SCRIPT FAILED: continuing...; fi
scan_dev_for_scripts=for script in ${boot_scripts}; do if test -e ${devtype} ${devnum}:${bootpart} ${prefix}${script}; then echo Found U-Boot script ${prefix}${script}; run boot_a_script; echo SCRIPT FAILED: continuing...; fi; done
scriptaddr=0x00000000
serial#=000000003c5f75b9
snap_core=core_4797.snap
snap_kernel=pi2-kernel_54.snap
snappy_boot=if test "${snap_mode}" = "try"; then setenv snap_mode "trying"; saveenv; if test "${snap_try_core}" != ""; then setenv snap_core "${snap_try_core}"; fi; if test "${snap_try_kernel}" != ""; then setenv snap_kernel "${snap_try_kernel}"; fi; elif test "${snap_mode}" = "trying"; then setenv snap_mode ""; saveenv; fi; run loadfiles; setenv devroot "/dev/disk/by-label/writable ${snappy_cmdline} snap_core=${snap_core} snap_kernel=${snap_kernel}"; run allargs; bootz ${loadaddr} ${initrd_addr}:${initrd_size} 0x02000000
snappy_cmdline=net.ifnames=0 init=/lib/systemd/systemd ro panic=-1 fixrtc
soc=bcm2835
stderr=serial,lcd
stdin=serial,usbkbd
stdout=serial,lcd
uenvcmd=echo ENVCMD; run snappy_boot
vendor=raspberrypi
+ snap list
Name                              Version                     Rev   Tracking  Developer  Notes
cm3                               16.04-0.5                   1     stable    canonical  gadget
core                              16-2.33~rc1+git771.c4fa958  4797  edge      canonical  core
pi2-kernel                        4.4.0-1090.98               54    stable    canonical  kernel
test-snapd-broadcom-asic-control                              x1    -         -          disabled,broken
test-snapd-rsync                  3.1.3                       10    stable    cachio     devmode
+ snap changes
ID   Status  Spawn               Ready               Summary
1    Done    today at 04:48 UTC  today at 04:48 UTC  Initialize system state
2    Done    today at 04:48 UTC  today at 04:49 UTC  Initialize device
5    Done    today at 04:48 UTC  today at 05:02 UTC  Install "jq" snap
3    Done    today at 04:48 UTC  today at 04:48 UTC  Refresh "core" snap from "edge" channel
4    Done    today at 04:49 UTC  today at 04:52 UTC  Auto-refresh snap "pi2-kernel"
6    Done    today at 05:02 UTC  today at 05:02 UTC  Remove "jq" snap
7    Done    today at 05:03 UTC  today at 05:03 UTC  Install "test-snapd-rsync" snap
8    Done    today at 05:03 UTC  today at 05:03 UTC  Setup alias "rsync" => "rsync" for snap "test-snapd-rsync"
9    Done    today at 05:03 UTC  today at 05:03 UTC  Install "jq" snap
10   Done    today at 05:03 UTC  today at 05:03 UTC  Change configuration of "core" snap
11   Done    today at 05:03 UTC  today at 05:03 UTC  Remove "jq" snap
12   Done    today at 05:04 UTC  today at 05:05 UTC  Install "test-snapd-broadcom-asic-control" snap from file "/home/gopath/src/github.com/snapcore/snapd/tests/lib/snaps/test-snapd-broadcom-asic-control/test-snapd-broadcom-asic-control_1.0_all.snap"
13   Done    today at 05:05 UTC  today at 05:05 UTC  Connect test-snapd-broadcom-asic-control:broadcom-asic-control to core:broadcom-asic-control
14   Done    today at 05:05 UTC  today at 05:05 UTC  Disconnect : from test-snapd-broadcom-asic-control:broadcom-asic-control
15   Doing   today at 05:05 UTC  -                   Remove "test-snapd-broadcom-asic-control" snap

+ '[' 1 = 1 ']'
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/journalctl.sh
++ JOURNALCTL_CURSOR_FILE=/home/gopath/src/github.com/snapcore/snapd/journalctl_cursor
+ echo '# journal messages for snapd'
# journal messages for snapd
+ get_journalctl_log -u snapd
++ cat /home/gopath/src/github.com/snapcore/snapd/journalctl_cursor
+ cursor='s=0bf798f82dda460195fe7462d0148781;i=3e4;b=310437c88af546029c662c297174d398;m=52719027;t=56db60b601c40;x=835c0b3529d9ed60'
+ get_journalctl_log_from_cursor 's=0bf798f82dda460195fe7462d0148781;i=3e4;b=310437c88af546029c662c297174d398;m=52719027;t=56db60b601c40;x=835c0b3529d9ed60' -u snapd
+ cursor='s=0bf798f82dda460195fe7462d0148781;i=3e4;b=310437c88af546029c662c297174d398;m=52719027;t=56db60b601c40;x=835c0b3529d9ed60'
+ shift
+ journalctl -u snapd --cursor 's=0bf798f82dda460195fe7462d0148781;i=3e4;b=310437c88af546029c662c297174d398;m=52719027;t=56db60b601c40;x=835c0b3529d9ed60'
-- Logs begin at Sun 2018-06-03 04:48:23 UTC, end at Sun 2018-06-03 05:26:18 UTC. --
Jun 03 05:25:26 localhost.localdomain snapd[2167]: 2018/06/03 05:25:26.308813 snapmgr.go:228: cannot read snap info of snap "test-snapd-broadcom-asic-control" at revision x1: cannot find installed snap "test-snapd-broadcom-asic-control" at revision x1: missing file /snap/test-snapd-broadcom-asic-control/x1/meta/snap.yaml
Jun 03 05:25:26 localhost.localdomain snapd[2167]: 2018/06/03 05:25:26.328730 daemon.go:272: DEBUG: pid=2794;uid=0;socket=/run/snapd.socket;@ GET /v2/snaps 21.531242ms 200
Jun 03 05:25:26 localhost.localdomain snapd[2167]: 2018/06/03 05:25:26.448561 snapmgr.go:228: cannot read snap info of snap "test-snapd-broadcom-asic-control" at revision x1: cannot find installed snap "test-snapd-broadcom-asic-control" at revision x1: missing file /snap/test-snapd-broadcom-asic-control/x1/meta/snap.yaml
Jun 03 05:25:26 localhost.localdomain snapd[2167]: 2018/06/03 05:25:26.452987 daemon.go:272: DEBUG: pid=2803;uid=0;socket=/run/snapd.socket;@ GET /v2/snaps 21.204003ms 200
Jun 03 05:25:52 localhost.localdomain snapd[2167]: 2018/06/03 05:25:52.712645 taskrunner.go:403: DEBUG: Running task 158 on Doing: Remove snap "test-snapd-broadcom-asic-control" (x1) from the system
Jun 03 05:26:17 localhost.localdomain snapd[2167]: 2018/06/03 05:26:17.836714 task.go:303: DEBUG: 2018-06-03T05:26:17Z ERROR cannot remove snap file "test-snapd-broadcom-asic-control", will retry in 3 mins: [--root / disable snap-test\x2dsnapd\x2dbroadcom\x2dasic\x2dcontrol-x1.mount] failed with exit status 1: Failed to execute operation: Connection timed out
Jun 03 05:26:17 localhost.localdomain snapd[2167]: 2018/06/03 05:26:17.993778 snapmgr.go:228: cannot read snap info of snap "test-snapd-broadcom-asic-control" at revision x1: cannot find installed snap "test-snapd-broadcom-asic-control" at revision x1: missing file /snap/test-snapd-broadcom-asic-control/x1/meta/snap.yaml
Jun 03 05:26:17 localhost.localdomain snapd[2167]: 2018/06/03 05:26:17.998259 daemon.go:272: DEBUG: pid=2823;uid=0;socket=/run/snapd.socket;@ GET /v2/snaps 1.251221993s 200
Jun 03 05:26:18 localhost.localdomain snapd[2167]: 2018/06/03 05:26:18.116737 daemon.go:272: DEBUG: pid=2829;uid=0;socket=/run/snapd.socket;@ GET /v2/changes?select=all 19.327002ms 200
+ echo '# apparmor denials '
# apparmor denials 
+ dmesg --ctime
+ grep DENIED
+ true
+ echo '# seccomp denials (kills) '
# seccomp denials (kills) 
+ dmesg --ctime
+ grep type=1326
+ true
+ echo '# snap interfaces'
# snap interfaces
+ snap interfaces
Slot                      Plug
cm3:bcm-gpio-0            -
cm3:bcm-gpio-1            -
cm3:bcm-gpio-10           -
cm3:bcm-gpio-11           -
cm3:bcm-gpio-12           -
cm3:bcm-gpio-13           -
cm3:bcm-gpio-14           -
cm3:bcm-gpio-15           -
cm3:bcm-gpio-16           -
cm3:bcm-gpio-17           -
cm3:bcm-gpio-18           -
cm3:bcm-gpio-19           -
cm3:bcm-gpio-2            -
cm3:bcm-gpio-20           -
cm3:bcm-gpio-21           -
cm3:bcm-gpio-22           -
cm3:bcm-gpio-23           -
cm3:bcm-gpio-24           -
cm3:bcm-gpio-25           -
cm3:bcm-gpio-26           -
cm3:bcm-gpio-27           -
cm3:bcm-gpio-3            -
cm3:bcm-gpio-4            -
cm3:bcm-gpio-5            -
cm3:bcm-gpio-6            -
cm3:bcm-gpio-7            -
cm3:bcm-gpio-8            -
cm3:bcm-gpio-9            -
cm3:bt-serial             -
cm3:i2c-0                 -
cm3:i2c-1                 -
cm3:i2c-2                 -
:account-control          -
:alsa                     -
:autopilot-introspection  -
:bluetooth-control        -
:broadcom-asic-control    -
:browser-support          -
:camera                   -
:classic-support          -
:core-support             core:core-support-plug
:daemon-notify            -
:dcdbas-control           -
:docker-support           -
:firewall-control         -
:framebuffer              -
:fuse-support             -
:gpg-keys                 -
:gpg-public-keys          -
:gpio-memory-control      -
:greengrass-support       -
:hardware-observe         -
:hardware-random-control  -
:hardware-random-observe  -
:home                     -
:hostname-control         -
:io-ports-control         -
:joystick                 -
:kernel-module-control    -
:kubernetes-support       -
:kvm                      -
:log-observe              -
:lxd-support              -
:mount-observe            -
:netlink-audit            -
:netlink-connector        -
:network                  -
:network-bind             -
:network-control          -
:network-observe          -
:network-setup-control    -
:network-setup-observe    -
:opengl                   -
:openvswitch-support      -
:physical-memory-control  -
:physical-memory-observe  -
:ppp                      -
:process-control          -
:raw-usb                  -
:removable-media          -
:shutdown                 -
:snapd-control            -
:ssh-keys                 -
:ssh-public-keys          -
:system-observe           -
:system-trace             -
:time-control             -
:timeserver-control       -
:timezone-control         -
:tpm                      -
:uhid                     -
-----
.
2018-06-03 05:25:30 Restoring external:ubuntu-core-16-arm-32:tests/main/failover:emptysystemd...
2018-06-03 05:25:30 Preparing external:ubuntu-core-16-arm-32:tests/main/ubuntu-core-upgrade...
2018-06-03 05:26:21 Error preparing external:ubuntu-core-16-arm-32:tests/main/ubuntu-core-upgrade : 
-----
+ /home/gopath/src/github.com/snapcore/snapd/tests/lib/prepare-restore.sh --prepare-project-each
+ set -e
+ set -o pipefail
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/quiet.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/boot.sh
++ GRUB_EDITENV=grub-editenv
++ case "$SPREAD_SYSTEM" in
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/dirs.sh
++ export SNAP_MOUNT_DIR=/snap
++ SNAP_MOUNT_DIR=/snap
++ export LIBEXECDIR=/usr/lib
++ LIBEXECDIR=/usr/lib
++ export MEDIA_DIR=/media
++ MEDIA_DIR=/media
++ case "$SPREAD_SYSTEM" in
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/pkgdb.sh
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/quiet.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/random.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/spread-funcs.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/journalctl.sh
++ JOURNALCTL_CURSOR_FILE=/home/gopath/src/github.com/snapcore/snapd/journalctl_cursor
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/state.sh
++ SNAPD_STATE_PATH=/home/gopath/src/github.com/snapcore/snapd/tests/snapd-state
++ SNAPD_STATE_FILE=/home/gopath/src/github.com/snapcore/snapd/tests/snapd-state.tar
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/dirs.sh
+++ export SNAP_MOUNT_DIR=/snap
+++ SNAP_MOUNT_DIR=/snap
+++ export LIBEXECDIR=/usr/lib
+++ LIBEXECDIR=/usr/lib
+++ export MEDIA_DIR=/media
+++ MEDIA_DIR=/media
+++ case "$SPREAD_SYSTEM" in
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/boot.sh
+++ GRUB_EDITENV=grub-editenv
+++ case "$SPREAD_SYSTEM" in
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/systems.sh
+ case "$1" in
+ prepare_project_each
+ start_new_journalctl_log
++ get_last_journalctl_cursor
++ journalctl --output=export -n1
++ grep --binary-files=text -o '__CURSOR=.*'
++ sed -e 's/^__CURSOR=//'
+ cursor='s=0bf798f82dda460195fe7462d0148781;i=3f8;b=310437c88af546029c662c297174d398;m=56052c82;t=56db60ef3b89a;x=b9386af82c95c9aa'
+ '[' -z 's=0bf798f82dda460195fe7462d0148781;i=3f8;b=310437c88af546029c662c297174d398;m=56052c82;t=56db60ef3b89a;x=b9386af82c95c9aa' ']'
+ echo 's=0bf798f82dda460195fe7462d0148781;i=3f8;b=310437c88af546029c662c297174d398;m=56052c82;t=56db60ef3b89a;x=b9386af82c95c9aa'
+ dmesg -c
+ fixup_dev_random
+ mv /dev/random /dev/random.orig
+ mknod /dev/random c 1 9
+ kill_gpg_agent
+ pkill -9 -e gpg-agent
+ true
+ /home/gopath/src/github.com/snapcore/snapd/tests/lib/prepare-restore.sh --prepare-suite-each
+ set -e
+ set -o pipefail
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/quiet.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/boot.sh
++ GRUB_EDITENV=grub-editenv
++ case "$SPREAD_SYSTEM" in
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/dirs.sh
++ export SNAP_MOUNT_DIR=/snap
++ SNAP_MOUNT_DIR=/snap
++ export LIBEXECDIR=/usr/lib
++ LIBEXECDIR=/usr/lib
++ export MEDIA_DIR=/media
++ MEDIA_DIR=/media
++ case "$SPREAD_SYSTEM" in
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/pkgdb.sh
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/quiet.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/random.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/spread-funcs.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/journalctl.sh
++ JOURNALCTL_CURSOR_FILE=/home/gopath/src/github.com/snapcore/snapd/journalctl_cursor
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/state.sh
++ SNAPD_STATE_PATH=/home/gopath/src/github.com/snapcore/snapd/tests/snapd-state
++ SNAPD_STATE_FILE=/home/gopath/src/github.com/snapcore/snapd/tests/snapd-state.tar
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/dirs.sh
+++ export SNAP_MOUNT_DIR=/snap
+++ SNAP_MOUNT_DIR=/snap
+++ export LIBEXECDIR=/usr/lib
+++ LIBEXECDIR=/usr/lib
+++ export MEDIA_DIR=/media
+++ MEDIA_DIR=/media
+++ case "$SPREAD_SYSTEM" in
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/boot.sh
+++ GRUB_EDITENV=grub-editenv
+++ case "$SPREAD_SYSTEM" in
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/systems.sh
+ case "$1" in
+ prepare_suite_each
+ /home/gopath/src/github.com/snapcore/snapd/tests/lib/reset.sh --reuse-core
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/dirs.sh
++ export SNAP_MOUNT_DIR=/snap
++ SNAP_MOUNT_DIR=/snap
++ export LIBEXECDIR=/usr/lib
++ LIBEXECDIR=/usr/lib
++ export MEDIA_DIR=/media
++ MEDIA_DIR=/media
++ case "$SPREAD_SYSTEM" in
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/state.sh
++ SNAPD_STATE_PATH=/home/gopath/src/github.com/snapcore/snapd/tests/snapd-state
++ SNAPD_STATE_FILE=/home/gopath/src/github.com/snapcore/snapd/tests/snapd-state.tar
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/dirs.sh
+++ export SNAP_MOUNT_DIR=/snap
+++ SNAP_MOUNT_DIR=/snap
+++ export LIBEXECDIR=/usr/lib
+++ LIBEXECDIR=/usr/lib
+++ export MEDIA_DIR=/media
+++ MEDIA_DIR=/media
+++ case "$SPREAD_SYSTEM" in
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/boot.sh
+++ GRUB_EDITENV=grub-editenv
+++ case "$SPREAD_SYSTEM" in
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/systems.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/systemd.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/systems.sh
+ is_core_system
+ [[ ubuntu-core-16-arm-32 == ubuntu-core-16-* ]]
+ return 0
+ reset_all_snap --reuse-core
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/names.sh
+++ snap list
+++ grep 'gadget$'
+++ awk '{ print $1 }'
++ gadget_name=cm3
+++ snap list
+++ grep 'kernel$'
+++ awk '{ print $1 }'
++ kernel_name=pi2-kernel
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=README
+ case "$snap" in
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=bin
+ case "$snap" in
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=cm3
+ case "$snap" in
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=core
+ case "$snap" in
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=manifest.yaml
+ case "$snap" in
+ systemctl status snapd.service snapd.socket
Failed to get properties: Connection timed out
+ systemctl start snapd.service snapd.socket
Failed to start snapd.service: Connection timed out
See system logs and 'systemctl status snapd.service' for details.
Failed to start snapd.socket: Connection timed out
See system logs and 'systemctl status snapd.socket' for details.
-----
.
2018-06-03 05:26:22 Debug output for external:ubuntu-core-16-arm-32:tests/main/ubuntu-core-upgrade : 
-----
+ snap list
Name                              Version                     Rev   Tracking  Developer  Notes
cm3                               16.04-0.5                   1     stable    canonical  gadget
core                              16-2.33~rc1+git771.c4fa958  4797  edge      canonical  core
pi2-kernel                        4.4.0-1090.98               54    stable    canonical  kernel
test-snapd-broadcom-asic-control                              x1    -         -          disabled,broken
test-snapd-rsync                  3.1.3                       10    stable    cachio     devmode
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/boot.sh
++ GRUB_EDITENV=grub-editenv
++ case "$SPREAD_SYSTEM" in
+ bootenv
+ '[' 0 -eq 0 ']'
+ command -v grub-editenv
+ fw_printenv
allargs=setenv bootargs "${args} root=${devroot}"
arch=arm
baudrate=115200
board_name=Compute Module 3
board_rev=0xA
board_rev_scheme=1
board_revision=0xA020A0
boot_a_script=load ${devtype} ${devnum}:${bootpart} ${scriptaddr} ${prefix}${script}; source ${scriptaddr}
boot_extlinux=sysboot ${devtype} ${devnum}:${bootpart} any ${scriptaddr} ${prefix}extlinux/extlinux.conf
boot_prefixes=/ /boot/
boot_script_dhcp=boot.scr.uimg
boot_scripts=boot.scr.uimg boot.scr
boot_targets=mmc usb pxe dhcp 
bootcmd=run distro_bootcmd
bootcmd_dhcp=usb start; if dhcp ${scriptaddr} ${boot_script_dhcp}; then source ${scriptaddr}; fi
bootcmd_mmc=setenv devnum 0; run dev_boot
bootcmd_pxe=usb start; dhcp; if pxe get; then pxe boot; fi
bootcmd_usb=setenv devnum 0; usb start; run dev_boot
bootdelay=2
bootenv=uEnv.txt
cpu=armv7
dev_boot=if ${target} dev ${devnum}; then setenv devtype ${target}; if run loadbootenv; then echo Loaded environment from ${bootenv}; run importbootenv; fi; if test -n "$uenvcmd"; then echo Running uenvcmd ...; run uenvcmd; fi; run scan_dev_for_boot_part; fi
devnum=0
devnumber=0
devtype=mmc
dhcpuboot=usb start; dhcp u-boot.uimg; bootm
distro_bootcmd=for target in ${boot_targets}; do run bootcmd_${target}; done
fdt_addr=2000000
fdt_addr_r=0x00000100
fdtaddr=0x02000000
fdtcontroladdr=3af8c230
fdtfile=bcm2709-rpi-2-b.dtb
filesize=1c5
importbootenv=echo Importing environment from ${target} ...; env import -t -r $loadaddr $filesize
initrd_addr=0x02100000
initrd_file=initrd.img
kernel_addr_r=0x01000000
kernel_file=kernel.img
loadaddr=0x00200000
loadbootenv=echo LOADBOOTENV; load ${devtype} ${devnum} ${loadaddr} ${bootenv}
loadfdt=fdt addr 0x02000000; fdt get value args /chosen bootargs
loadfiles=run loadkernel; run loadinitrd; run loadfdt
loadinitrd=load ${target} ${devnumber}:${partition} ${initrd_addr} ${snap_kernel}/${initrd_file}; setenv initrd_size ${filesize}
loadkernel=load ${target} ${devnumber}:${partition} ${loadaddr} ${snap_kernel}/${kernel_file}
mmcrootfstype=ext4
partition=1
pxefile_addr_r=0x00100000
ramdisk_addr_r=0x02100000
scan_dev_for_boot=echo Scanning ${devtype} ${devnum}:${bootpart}...; for prefix in ${boot_prefixes}; do run scan_dev_for_extlinux; run scan_dev_for_scripts; done
scan_dev_for_boot_part=part list ${devtype} ${devnum} devplist; for bootpart in ${devplist}; do if fstype ${devtype} ${devnum}:${bootpart} bootfstype; then run scan_dev_for_boot; fi; done
scan_dev_for_extlinux=if test -e ${devtype} ${devnum}:${bootpart} ${prefix}extlinux/extlinux.conf; then echo Found ${prefix}extlinux/extlinux.conf; run boot_extlinux; echo SCRIPT FAILED: continuing...; fi
scan_dev_for_scripts=for script in ${boot_scripts}; do if test -e ${devtype} ${devnum}:${bootpart} ${prefix}${script}; then echo Found U-Boot script ${prefix}${script}; run boot_a_script; echo SCRIPT FAILED: continuing...; fi; done
scriptaddr=0x00000000
serial#=000000003c5f75b9
snap_core=core_4797.snap
snap_kernel=pi2-kernel_54.snap
snappy_boot=if test "${snap_mode}" = "try"; then setenv snap_mode "trying"; saveenv; if test "${snap_try_core}" != ""; then setenv snap_core "${snap_try_core}"; fi; if test "${snap_try_kernel}" != ""; then setenv snap_kernel "${snap_try_kernel}"; fi; elif test "${snap_mode}" = "trying"; then setenv snap_mode ""; saveenv; fi; run loadfiles; setenv devroot "/dev/disk/by-label/writable ${snappy_cmdline} snap_core=${snap_core} snap_kernel=${snap_kernel}"; run allargs; bootz ${loadaddr} ${initrd_addr}:${initrd_size} 0x02000000
snappy_cmdline=net.ifnames=0 init=/lib/systemd/systemd ro panic=-1 fixrtc
soc=bcm2835
stderr=serial,lcd
stdin=serial,usbkbd
stdout=serial,lcd
uenvcmd=echo ENVCMD; run snappy_boot
vendor=raspberrypi
+ cat /proc/cmdline
dma.dmachans=0x7f35 bcm2708_fb.fbwidth=656 bcm2708_fb.fbheight=416 bcm2709.boardrev=0xa020a0 bcm2709.serial=0x3c5f75b9 smsc95xx.macaddr=B8:27:EB:5F:75:B9 bcm2708_fb.fbswap=1 bcm2709.uart_clock=48000000 vc_mem.mem_base=0x3dc00000 vc_mem.mem_size=0x3f000000  dwc_otg.lpm_enable=0 console=ttyAMA0,115200 console=tty0 elevator=deadline rng_core.default_quality=700 root=/dev/disk/by-label/writable net.ifnames=0 init=/lib/systemd/systemd ro panic=-1 fixrtc snap_core=core_4797.snap snap_kernel=pi2-kernel_54.snap
+ '[' 1 = 1 ']'
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/journalctl.sh
++ JOURNALCTL_CURSOR_FILE=/home/gopath/src/github.com/snapcore/snapd/journalctl_cursor
+ echo '# journal messages for snapd'
# journal messages for snapd
+ get_journalctl_log -u snapd
++ cat /home/gopath/src/github.com/snapcore/snapd/journalctl_cursor
+ cursor='s=0bf798f82dda460195fe7462d0148781;i=3f8;b=310437c88af546029c662c297174d398;m=56052c82;t=56db60ef3b89a;x=b9386af82c95c9aa'
+ get_journalctl_log_from_cursor 's=0bf798f82dda460195fe7462d0148781;i=3f8;b=310437c88af546029c662c297174d398;m=56052c82;t=56db60ef3b89a;x=b9386af82c95c9aa' -u snapd
+ cursor='s=0bf798f82dda460195fe7462d0148781;i=3f8;b=310437c88af546029c662c297174d398;m=56052c82;t=56db60ef3b89a;x=b9386af82c95c9aa'
+ shift
+ journalctl -u snapd --cursor 's=0bf798f82dda460195fe7462d0148781;i=3f8;b=310437c88af546029c662c297174d398;m=56052c82;t=56db60ef3b89a;x=b9386af82c95c9aa'
-- Logs begin at Sun 2018-06-03 04:48:23 UTC, end at Sun 2018-06-03 05:27:16 UTC. --
Jun 03 05:26:26 localhost.localdomain snapd[2167]: 2018/06/03 05:26:26.307261 snapmgr.go:228: cannot read snap info of snap "test-snapd-broadcom-asic-control" at revision x1: cannot find installed snap "test-snapd-broadcom-asic-control" at revision x1: missing file /snap/test-snapd-broadcom-asic-control/x1/meta/snap.yaml
Jun 03 05:26:26 localhost.localdomain snapd[2167]: 2018/06/03 05:26:26.314407 daemon.go:272: DEBUG: pid=2889;uid=0;socket=/run/snapd.socket;@ GET /v2/snaps 21.555713ms 200
Jun 03 05:26:26 localhost.localdomain snapd[2167]: 2018/06/03 05:26:26.420521 snapmgr.go:228: cannot read snap info of snap "test-snapd-broadcom-asic-control" at revision x1: cannot find installed snap "test-snapd-broadcom-asic-control" at revision x1: missing file /snap/test-snapd-broadcom-asic-control/x1/meta/snap.yaml
Jun 03 05:26:26 localhost.localdomain snapd[2167]: 2018/06/03 05:26:26.440306 daemon.go:272: DEBUG: pid=2898;uid=0;socket=/run/snapd.socket;@ GET /v2/snaps 21.427744ms 200
Jun 03 05:27:16 localhost.localdomain snapd[2167]: 2018/06/03 05:27:16.722990 snapmgr.go:228: cannot read snap info of snap "test-snapd-broadcom-asic-control" at revision x1: cannot find installed snap "test-snapd-broadcom-asic-control" at revision x1: missing file /snap/test-snapd-broadcom-asic-control/x1/meta/snap.yaml
Jun 03 05:27:16 localhost.localdomain snapd[2167]: 2018/06/03 05:27:16.742469 daemon.go:272: DEBUG: pid=2916;uid=0;socket=/run/snapd.socket;@ GET /v2/snaps 21.169855ms 200
+ echo '# apparmor denials '
# apparmor denials 
+ dmesg --ctime
+ grep DENIED
+ true
+ echo '# seccomp denials (kills) '
# seccomp denials (kills) 
+ dmesg --ctime
+ grep type=1326
+ true
+ echo '# snap interfaces'
# snap interfaces
+ snap interfaces
Slot                      Plug
cm3:bcm-gpio-0            -
cm3:bcm-gpio-1            -
cm3:bcm-gpio-10           -
cm3:bcm-gpio-11           -
cm3:bcm-gpio-12           -
cm3:bcm-gpio-13           -
cm3:bcm-gpio-14           -
cm3:bcm-gpio-15           -
cm3:bcm-gpio-16           -
cm3:bcm-gpio-17           -
cm3:bcm-gpio-18           -
cm3:bcm-gpio-19           -
cm3:bcm-gpio-2            -
cm3:bcm-gpio-20           -
cm3:bcm-gpio-21           -
cm3:bcm-gpio-22           -
cm3:bcm-gpio-23           -
cm3:bcm-gpio-24           -
cm3:bcm-gpio-25           -
cm3:bcm-gpio-26           -
cm3:bcm-gpio-27           -
cm3:bcm-gpio-3            -
cm3:bcm-gpio-4            -
cm3:bcm-gpio-5            -
cm3:bcm-gpio-6            -
cm3:bcm-gpio-7            -
cm3:bcm-gpio-8            -
cm3:bcm-gpio-9            -
cm3:bt-serial             -
cm3:i2c-0                 -
cm3:i2c-1                 -
cm3:i2c-2                 -
:account-control          -
:alsa                     -
:autopilot-introspection  -
:bluetooth-control        -
:broadcom-asic-control    -
:browser-support          -
:camera                   -
:classic-support          -
:core-support             core:core-support-plug
:daemon-notify            -
:dcdbas-control           -
:docker-support           -
:firewall-control         -
:framebuffer              -
:fuse-support             -
:gpg-keys                 -
:gpg-public-keys          -
:gpio-memory-control      -
:greengrass-support       -
:hardware-observe         -
:hardware-random-control  -
:hardware-random-observe  -
:home                     -
:hostname-control         -
:io-ports-control         -
:joystick                 -
:kernel-module-control    -
:kubernetes-support       -
:kvm                      -
:log-observe              -
:lxd-support              -
:mount-observe            -
:netlink-audit            -
:netlink-connector        -
:network                  -
:network-bind             -
:network-control          -
:network-observe          -
:network-setup-control    -
:network-setup-observe    -
:opengl                   -
:openvswitch-support      -
:physical-memory-control  -
:physical-memory-observe  -
:ppp                      -
:process-control          -
:raw-usb                  -
:removable-media          -
:shutdown                 -
:snapd-control            -
:ssh-keys                 -
:ssh-public-keys          -
:system-observe           -
:system-trace             -
:time-control             -
:timeserver-control       -
:timezone-control         -
:tpm                      -
:uhid                     -
-----
.
2018-06-03 05:26:22 Restoring external:ubuntu-core-16-arm-32:tests/main/ubuntu-core-upgrade...
2018-06-03 05:26:47 Error restoring external:ubuntu-core-16-arm-32:tests/main/ubuntu-core-upgrade : 
-----
+ systemctl restart snapd
Failed to restart snapd.service: Connection timed out
See system logs and 'systemctl status snapd.service' for details.
-----
.
2018-06-03 05:26:47 Restoring external:ubuntu-core-16-arm-32:tests/main/...
2018-06-03 05:27:37 Error restoring external:ubuntu-core-16-arm-32:tests/main/ : 
-----
+ /home/gopath/src/github.com/snapcore/snapd/tests/lib/prepare-restore.sh --restore-suite
+ set -e
+ set -o pipefail
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/quiet.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/boot.sh

++ GRUB_EDITENV=grub-editenv
++ case "$SPREAD_SYSTEM" in
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/dirs.sh
++ export SNAP_MOUNT_DIR=/snap
++ SNAP_MOUNT_DIR=/snap
++ export LIBEXECDIR=/usr/lib
++ LIBEXECDIR=/usr/lib
++ export MEDIA_DIR=/media
++ MEDIA_DIR=/media
++ case "$SPREAD_SYSTEM" in
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/pkgdb.sh
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/quiet.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/random.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/spread-funcs.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/journalctl.sh
++ JOURNALCTL_CURSOR_FILE=/home/gopath/src/github.com/snapcore/snapd/journalctl_cursor
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/state.sh
++ SNAPD_STATE_PATH=/home/gopath/src/github.com/snapcore/snapd/tests/snapd-state
++ SNAPD_STATE_FILE=/home/gopath/src/github.com/snapcore/snapd/tests/snapd-state.tar
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/dirs.sh
+++ export SNAP_MOUNT_DIR=/snap
+++ SNAP_MOUNT_DIR=/snap
+++ export LIBEXECDIR=/usr/lib
+++ LIBEXECDIR=/usr/lib
+++ export MEDIA_DIR=/media
+++ MEDIA_DIR=/media
+++ case "$SPREAD_SYSTEM" in
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/boot.sh
+++ GRUB_EDITENV=grub-editenv
+++ case "$SPREAD_SYSTEM" in
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/systems.sh
+ case "$1" in
+ restore_suite
+ /home/gopath/src/github.com/snapcore/snapd/tests/lib/reset.sh --store
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/dirs.sh
++ export SNAP_MOUNT_DIR=/snap
++ SNAP_MOUNT_DIR=/snap
++ export LIBEXECDIR=/usr/lib
++ LIBEXECDIR=/usr/lib
++ export MEDIA_DIR=/media
++ MEDIA_DIR=/media
++ case "$SPREAD_SYSTEM" in
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/state.sh
++ SNAPD_STATE_PATH=/home/gopath/src/github.com/snapcore/snapd/tests/snapd-state
++ SNAPD_STATE_FILE=/home/gopath/src/github.com/snapcore/snapd/tests/snapd-state.tar
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/dirs.sh
+++ export SNAP_MOUNT_DIR=/snap
+++ SNAP_MOUNT_DIR=/snap
+++ export LIBEXECDIR=/usr/lib
+++ LIBEXECDIR=/usr/lib
+++ export MEDIA_DIR=/media
+++ MEDIA_DIR=/media
+++ case "$SPREAD_SYSTEM" in
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/boot.sh
+++ GRUB_EDITENV=grub-editenv
+++ case "$SPREAD_SYSTEM" in
++ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/systems.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/systemd.sh
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/systems.sh
+ is_core_system
+ [[ ubuntu-core-16-arm-32 == ubuntu-core-16-* ]]
+ return 0
+ reset_all_snap --store
+ . /home/gopath/src/github.com/snapcore/snapd/tests/lib/names.sh
+++ snap list
+++ grep 'gadget$'
+++ awk '{ print $1 }'
++ gadget_name=cm3
+++ snap list
+++ grep 'kernel$'
+++ awk '{ print $1 }'
++ kernel_name=pi2-kernel
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=README
+ case "$snap" in
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=bin
+ case "$snap" in
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=cm3
+ case "$snap" in
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=core
+ case "$snap" in
+ for snap in '"$SNAP_MOUNT_DIR"/*'
+ snap=manifest.yaml
+ case "$snap" in
+ systemctl status snapd.service snapd.socket
Failed to get properties: Connection timed out
+ systemctl start snapd.service snapd.socket
Failed to start snapd.service: Connection timed out
See system logs and 'systemctl status snapd.service' for details.
Failed to start snapd.socket: Connection timed out
See system logs and 'systemctl status snapd.socket' for details.
-----
.
2018-06-03 05:27:37 Restoring external:ubuntu-core-16-arm-32...
2018-06-03 05:27:38 Discarding external:ubuntu-core-16-arm-32...
2018-06-03 05:27:38 Successful tasks: 1
2018-06-03 05:27:38 Aborted tasks: 192
2018-06-03 05:27:38 Failed task prepare: 3
    - external:ubuntu-core-16-arm-32:tests/main/failover:emptysystemd
    - external:ubuntu-core-16-arm-32:tests/main/failover:rclocalcrash
    - external:ubuntu-core-16-arm-32:tests/main/ubuntu-core-upgrade
2018-06-03 05:27:38 Failed task restore: 1
    - external:ubuntu-core-16-arm-32:tests/main/ubuntu-core-upgrade
2018-06-03 05:27:38 Failed suite restore: 1
    - external:ubuntu-core-16-arm-32:tests/main/
error: unsuccessful run
2018-06-03 05:27:38,854 cm3-001 WARNING: Tests failed, rc=1
2018-06-03 05:27:38,855 cm3-001 INFO: END testrun
complete
